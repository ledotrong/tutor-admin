{"ast":null,"code":"import _slicedToArray from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nimport _objectSpread from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _regeneratorRuntime from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Users/User.js\";\nimport React, { Component } from \"react\";\nimport { Card, Badge, CardBody, CardHeader, Col, Row, Table } from \"reactstrap\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nvar User =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(User, _Component);\n\n  function User(props) {\n    var _this;\n\n    _classCallCheck(this, User);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(User).call(this, props));\n    _this.componentDidMount =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee() {\n      var token, userData, user, banAction;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              token = JSON.parse(localStorage.getItem(\"token\"));\n              if (token) _this.setState({\n                token: token\n              });\n              _context.next = 4;\n              return _this.getUsers(token);\n\n            case 4:\n              userData = _context.sent;\n              user = null;\n              banAction = false;\n\n              if (userData) {\n                user = userData.find(function (user) {\n                  return user._id.toString() === _this.props.match.params.id;\n                });\n\n                if (user) {\n                  if (user.status === \"banned\") banAction = true;\n                  user.picture = React.createElement(\"img\", {\n                    src: user.picture,\n                    style: {\n                      height: 250,\n                      width: 250,\n                      objectFit: \"cover\",\n                      borderRadius: 125\n                    },\n                    alt: \"profile\",\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 32\n                    },\n                    __self: this\n                  });\n                  user.status = React.createElement(Badge, {\n                    color: _this.getBadge(user.status),\n                    __source: {\n                      fileName: _jsxFileName,\n                      lineNumber: 44\n                    },\n                    __self: this\n                  }, user.status);\n                  user.date = new Date(user.date).toLocaleString();\n                  user.address = Object.values(user.address).join(\", \");\n                  user.skills = Object.values(user.skills).join(\", \");\n                }\n\n                _this.setState({\n                  user: user,\n                  banAction: banAction\n                });\n              }\n\n            case 8:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    _this.getBadge = function (status) {\n      return status === \"active\" ? \"success\" : status === \"inactive\" ? \"secondary\" : status === \"pending\" ? \"warning\" : status === \"banned\" ? \"danger\" : \"primary\";\n    };\n\n    _this.getUsers =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2(token) {\n        var requestOptions, response, userData;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                requestOptions = {\n                  method: \"GET\",\n                  headers: {\n                    \"Content-Type\": \"application/json\",\n                    Authorization: \"Bearer \".concat(token)\n                  }\n                };\n                _context2.prev = 1;\n                _context2.next = 4;\n                return fetch(\"https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/users\", requestOptions);\n\n              case 4:\n                response = _context2.sent;\n                _context2.next = 7;\n                return _this.handleResponse(response);\n\n              case 7:\n                userData = _context2.sent;\n\n                _this.setState({\n                  loading: false,\n                  userData: userData\n                });\n\n                return _context2.abrupt(\"return\", userData);\n\n              case 12:\n                _context2.prev = 12;\n                _context2.t0 = _context2[\"catch\"](1);\n                return _context2.abrupt(\"return\", _context2.t0);\n\n              case 15:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, null, [[1, 12]]);\n      }));\n\n      return function (_x) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.banUserAction =\n    /*#__PURE__*/\n    _asyncToGenerator(\n    /*#__PURE__*/\n    _regeneratorRuntime.mark(function _callee3() {\n      var requestOptions, response, data, user;\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              _this.setState({\n                loading: true\n              });\n\n              requestOptions = {\n                method: \"PATCH\",\n                headers: {\n                  \"Content-Type\": \"application/json\",\n                  Authorization: \"Bearer \".concat(_this.state.token)\n                }\n              };\n              _context3.prev = 2;\n              _context3.next = 5;\n              return fetch(\"https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/ban-user/\".concat(_this.state.user._id), requestOptions);\n\n            case 5:\n              response = _context3.sent;\n              _context3.next = 8;\n              return _this.handleResponse(response);\n\n            case 8:\n              data = _context3.sent;\n              user = _this.state.user;\n              user.status = React.createElement(Badge, {\n                color: _this.getBadge(data),\n                __source: {\n                  fileName: _jsxFileName,\n                  lineNumber: 125\n                },\n                __self: this\n              }, data);\n\n              _this.setState({\n                loading: false,\n                user: user,\n                banAction: !_this.state.banAction\n              });\n\n              _context3.next = 17;\n              break;\n\n            case 14:\n              _context3.prev = 14;\n              _context3.t0 = _context3[\"catch\"](2);\n              console.log(_context3.t0);\n\n            case 17:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3, this, [[2, 14]]);\n    }));\n    _this.state = {\n      loading: true,\n      banAction: false,\n      userData: [],\n      user: null,\n      token: null\n    };\n    return _this;\n  }\n\n  _createClass(User, [{\n    key: \"handleResponse\",\n    value: function handleResponse(response) {\n      return response.text().then(function (text) {\n        var data = text && JSON.parse(text);\n\n        if (!response.ok) {\n          if (response.status === 401) {} // auto logout if 401 response returned from api\n          // logoutUser();\n          // const error = (data && data.message) || response.statusText;\n          // return Promise.reject(error);\n\n\n          return data;\n        }\n\n        return data;\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var user = this.state.user;\n\n      if (!user) {\n        user = {\n          id: \"Not found\"\n        };\n      }\n\n      var details = [[\"Name\", user.name], [\"Email\", user.email], [\"Address\", user.address], [\"Role\", user.role], [\"Skills\", user.skills], [\"Date registered\", user.date], [\"Wages\", user.wages], [\"Status\", user.status], [\"Introduction\", user.introduction]];\n      return React.createElement(\"div\", {\n        className: \"animated fadeIn\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 152\n        },\n        __self: this\n      }, React.createElement(LoadingOverlay, {\n        active: this.state.loading,\n        spinner: true,\n        text: \"Loading...\",\n        styles: {\n          overlay: function overlay(base) {\n            return _objectSpread({}, base, {\n              background: \"rgba(255, 255, 255, 0.5)\",\n              color: \"black\"\n            });\n          },\n          spinner: function spinner(base) {\n            return _objectSpread({}, base, {\n              width: \"100px\",\n              \"& svg circle\": {\n                stroke: \"rgba(255, 0, 0, 0.5)\"\n              }\n            });\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 153\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: 12,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173\n        },\n        __self: this\n      }, React.createElement(Card, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 174\n        },\n        __self: this\n      }, React.createElement(CardHeader, {\n        className: \"bg-dark\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 175\n        },\n        __self: this\n      }, React.createElement(\"strong\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176\n        },\n        __self: this\n      }, React.createElement(\"i\", {\n        className: \"icon-info pr-1\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177\n        },\n        __self: this\n      }), \"User id:\", \" \", this.props.match.params.id)), React.createElement(CardBody, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181\n        },\n        __self: this\n      }, React.createElement(Row, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182\n        },\n        __self: this\n      }, React.createElement(Col, {\n        lg: 3,\n        className: \" mt-4\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183\n        },\n        __self: this\n      }, React.createElement(Row, {\n        className: \"justify-content-center font-weight-bold mb-3\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"text-uppercase\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185\n        },\n        __self: this\n      }, user.name)), React.createElement(Row, {\n        className: \"justify-content-center\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187\n        },\n        __self: this\n      }, user.picture)), React.createElement(Col, {\n        className: \"ml-4 mt-4\",\n        lg: 8,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 210\n        },\n        __self: this\n      }, React.createElement(Table, {\n        responsive: true,\n        bordered: true,\n        hover: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 211\n        },\n        __self: this\n      }, React.createElement(\"tbody\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212\n        },\n        __self: this\n      }, details.map(function (_ref4) {\n        var _ref5 = _slicedToArray(_ref4, 2),\n            key = _ref5[0],\n            value = _ref5[1];\n\n        if (key !== \"_id\" && key !== \"googleProvider\" && key !== \"facebookProvider\") return React.createElement(\"tr\", {\n          key: key,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 220\n          },\n          __self: this\n        }, React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 221\n          },\n          __self: this\n        }, \"\".concat(key, \":\")), React.createElement(\"td\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 222\n          },\n          __self: this\n        }, React.createElement(\"strong\", {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 223\n          },\n          __self: this\n        }, value)));\n      }))), React.createElement(Row, {\n        className: \"justify-content-end mr-2\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: function onClick() {\n          return _this2.banUserAction();\n        },\n        type: \"button\",\n        className: \"btn \".concat(this.state.banAction ? \"btn-success\" : \"btn-danger\"),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }, this.state.banAction ? \"Unban\" : \"Ban\"))))))))));\n    }\n  }]);\n\n  return User;\n}(Component);\n\nexport default User;","map":{"version":3,"sources":["/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Users/User.js"],"names":["React","Component","Card","Badge","CardBody","CardHeader","Col","Row","Table","LoadingOverlay","User","props","componentDidMount","token","JSON","parse","localStorage","getItem","setState","getUsers","userData","user","banAction","find","_id","toString","match","params","id","status","picture","height","width","objectFit","borderRadius","getBadge","date","Date","toLocaleString","address","Object","values","join","skills","requestOptions","method","headers","Authorization","fetch","response","handleResponse","loading","banUserAction","state","data","console","log","text","then","ok","details","name","email","role","wages","introduction","overlay","base","background","color","spinner","stroke","map","key","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { Card, Badge, CardBody, CardHeader, Col, Row, Table } from \"reactstrap\";\nimport LoadingOverlay from \"react-loading-overlay\";\n\nclass User extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      banAction: false,\n      userData: [],\n      user: null,\n      token: null\n    };\n  }\n\n  componentDidMount = async () => {\n    const token = JSON.parse(localStorage.getItem(\"token\"));\n    if (token) this.setState({ token });\n    const userData = await this.getUsers(token);\n    let user = null;\n    let banAction = false;\n\n    if (userData) {\n      user = userData.find(\n        user => user._id.toString() === this.props.match.params.id\n      );\n\n      if (user) {\n        if (user.status === \"banned\") banAction = true;\n        user.picture = (\n          <img\n            src={user.picture}\n            style={{\n              height: 250,\n              width: 250,\n              objectFit: \"cover\",\n              borderRadius: 125\n            }}\n            alt=\"profile\"\n          />\n        );\n        user.status = (\n          <Badge color={this.getBadge(user.status)}>{user.status}</Badge>\n        );\n        user.date = new Date(user.date).toLocaleString();\n        user.address = Object.values(user.address).join(\", \");\n        user.skills = Object.values(user.skills).join(\", \");\n      }\n\n      this.setState({ user: user, banAction });\n    }\n  };\n\n  getBadge = status => {\n    return status === \"active\"\n      ? \"success\"\n      : status === \"inactive\"\n      ? \"secondary\"\n      : status === \"pending\"\n      ? \"warning\"\n      : status === \"banned\"\n      ? \"danger\"\n      : \"primary\";\n  };\n\n  getUsers = async token => {\n    const requestOptions = {\n      method: \"GET\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        \"https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/users\",\n        requestOptions\n      );\n\n      let userData = await this.handleResponse(response);\n\n      this.setState({ loading: false, userData: userData });\n\n      return userData;\n    } catch (err) {\n      return err;\n    }\n  };\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n      if (!response.ok) {\n        if (response.status === 401) {\n          // auto logout if 401 response returned from api\n          // logoutUser();\n        }\n\n        // const error = (data && data.message) || response.statusText;\n        // return Promise.reject(error);\n        return data;\n      }\n      return data;\n    });\n  }\n\n  banUserAction = async () => {\n    this.setState({ loading: true });\n    const requestOptions = {\n      method: \"PATCH\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n        Authorization: `Bearer ${this.state.token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        `https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/ban-user/${this.state.user._id}`,\n        requestOptions\n      );\n\n      const data = await this.handleResponse(response);\n      let user = this.state.user;\n      user.status = <Badge color={this.getBadge(data)}>{data}</Badge>;\n\n      this.setState({ loading: false, user, banAction: !this.state.banAction });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  render() {\n    let user = this.state.user;\n    if (!user) {\n      user = { id: \"Not found\" };\n    }\n\n    const details = [\n      [\"Name\", user.name],\n      [\"Email\", user.email],\n      [\"Address\", user.address],\n      [\"Role\", user.role],\n      [\"Skills\", user.skills],\n      [\"Date registered\", user.date],\n      [\"Wages\", user.wages],\n      [\"Status\", user.status],\n      [\"Introduction\", user.introduction]\n    ];\n\n    return (\n      <div className=\"animated fadeIn\">\n        <LoadingOverlay\n          active={this.state.loading}\n          spinner\n          text=\"Loading...\"\n          styles={{\n            overlay: base => ({\n              ...base,\n              background: \"rgba(255, 255, 255, 0.5)\",\n              color: \"black\"\n            }),\n            spinner: base => ({\n              ...base,\n              width: \"100px\",\n              \"& svg circle\": {\n                stroke: \"rgba(255, 0, 0, 0.5)\"\n              }\n            })\n          }}\n        >\n          <Row className=\"justify-content-center\">\n            <Col lg={12}>\n              <Card>\n                <CardHeader className=\"bg-dark\">\n                  <strong>\n                    <i className=\"icon-info pr-1\"></i>User id:{\" \"}\n                    {this.props.match.params.id}\n                  </strong>\n                </CardHeader>\n                <CardBody>\n                  <Row>\n                    <Col lg={3} className=\" mt-4\">\n                      <Row className=\"justify-content-center font-weight-bold mb-3\">\n                        <h2 className=\"text-uppercase\">{user.name}</h2>\n                      </Row>\n                      <Row className=\"justify-content-center\">\n                        {user.picture}\n                      </Row>\n                      {/* <Table responsive hover>\n                        <tbody>\n                          {userDetails.map(([key, value]) => {\n                            if (\n                              key !== \"_id\" &&\n                              key !== \"googleProvider\" &&\n                              key !== \"facebookProvider\"\n                            )\n                              return (\n                                <tr key={key}>\n                                  <td>{`${key}:`}</td>\n                                  <td>\n                                    <strong>{value}</strong>\n                                  </td>\n                                </tr>\n                              );\n                          })}\n                        </tbody>\n                      </Table> */}\n                    </Col>\n                    <Col className=\"ml-4 mt-4\" lg={8}>\n                      <Table responsive bordered hover>\n                        <tbody>\n                          {details.map(([key, value]) => {\n                            if (\n                              key !== \"_id\" &&\n                              key !== \"googleProvider\" &&\n                              key !== \"facebookProvider\"\n                            )\n                              return (\n                                <tr key={key}>\n                                  <td>{`${key}:`}</td>\n                                  <td>\n                                    <strong>{value}</strong>\n                                  </td>\n                                </tr>\n                              );\n                          })}\n                        </tbody>\n                      </Table>\n                      <Row className=\"justify-content-end mr-2\">\n                        <button\n                          onClick={() => this.banUserAction()}\n                          type=\"button\"\n                          className={`btn ${\n                            this.state.banAction ? \"btn-success\" : \"btn-danger\"\n                          }`}\n                        >\n                          {this.state.banAction ? \"Unban\" : \"Ban\"}\n                        </button>\n                      </Row>\n                    </Col>\n                  </Row>\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </LoadingOverlay>\n      </div>\n    );\n  }\n}\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}