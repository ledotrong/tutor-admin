{"ast":null,"code":"import \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport \"antd/es/descriptions/style\";\nimport _Descriptions from \"antd/es/descriptions\";\nimport _objectSpread from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/tag/style\";\nimport _Tag from \"antd/es/tag\";\nimport \"antd/es/badge/style\";\nimport _Badge from \"antd/es/badge\";\nvar _jsxFileName = \"/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Contracts/Contract.js\";\nimport React, { Component, useReducer } from 'react';\nimport { Card, CardBody, CardHeader, Col, Row, Table } from 'reactstrap';\nimport LoadingOverlay from 'react-loading-overlay';\n\nclass Contract extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      const token = JSON.parse(localStorage.getItem('token'));\n      if (token) this.setState({\n        token\n      });\n      await this.getContract(token);\n      let student = null;\n      let banAction = false;\n    };\n\n    this.getBadge = status => {\n      return status === 'active' ? 'success' : status === 'inactive' ? 'default' : status === 'banned' ? 'error' : 'primary';\n    };\n\n    this.getContract = async token => {\n      this.setState({\n        loading: true\n      });\n      const requestOptions = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        }\n      };\n\n      try {\n        const response = await fetch(`https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/contracts/${this.state.id}`, requestOptions);\n        let contractData = await this.handleResponse(response);\n        console.log(contractData);\n        this.setState({\n          loading: false,\n          contractData: contractData,\n          student: contractData.student\n        });\n      } catch (err) {\n        return err;\n      }\n    };\n\n    this.banUserAction = async () => {\n      this.setState({\n        loading: true\n      });\n      const requestOptions = {\n        method: 'PATCH',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.state.token}`\n        }\n      };\n\n      try {\n        const response = await fetch(`https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/ban-student/${this.state.student._id}`, requestOptions);\n        const data = await this.handleResponse(response);\n        let student = this.state.student;\n        const date = new Date(student.date);\n        student.date = date.toLocaleString();\n        student.status = React.createElement(_Badge, {\n          status: this.getBadge(data),\n          text: data,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        });\n        this.setState({\n          loading: false,\n          student,\n          banAction: !this.state.banAction\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.state = {\n      token: null,\n      loading: true,\n      banAction: false,\n      contractData: [],\n      student: null,\n      tutor: null,\n      token: null,\n      id: null\n    };\n  }\n\n  componentWillMount() {\n    const id = this.props.match.params.id;\n    this.setState({\n      id\n    });\n  }\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n\n      if (!response.ok) {\n        if (response.status === 401) {} // auto logout if 401 response returned from api\n        // logoutUser();\n        // const error = (data && data.message) || response.statusText;\n        // return Promise.reject(error);\n\n\n        return data;\n      }\n\n      return data;\n    });\n  }\n\n  render() {\n    const colors = ['magenta', 'cyan', 'green', 'volcano', 'orange', 'purple', 'lime', 'red', 'blue', 'gold', 'geekblue'];\n    let student = this.state.student;\n    let skills = [];\n\n    if (student) {\n      let count = -1;\n      student.skills.map(item => {\n        const color = colors[++count % colors.length];\n        const skillTag = React.createElement(_Tag, {\n          color: color,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 139\n          },\n          __self: this\n        }, item);\n        skills.push(skillTag);\n      });\n    }\n\n    if (!student) {\n      student = {\n        id: 'Not found'\n      };\n    }\n\n    const details = [['Name', student.name], ['Email', student.email], ['Address', student.address], ['Role', student.role], ['Skills', student.skills], ['Date registered', student.date], ['Wages', student.wages], ['Status', student.status], ['Introduction', student.introduction]];\n    return React.createElement(\"div\", {\n      className: \"animated fadeIn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(LoadingOverlay, {\n      active: this.state.loading,\n      spinner: true,\n      text: \"Loading...\",\n      styles: {\n        overlay: base => _objectSpread({}, base, {\n          background: 'rgba(255, 255, 255, 0.5)',\n          color: 'black'\n        }),\n        spinner: base => _objectSpread({}, base, {\n          width: '100px',\n          '& svg circle': {\n            stroke: 'rgba(255, 0, 0, 0.5)'\n          }\n        })\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 182\n      },\n      __self: this\n    }, React.createElement(CardHeader, {\n      className: \"bg-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"icon-info pr-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }), \"Contract ID:\", ' ', this.props.match.params.id)), React.createElement(CardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 189\n      },\n      __self: this\n    }, React.createElement(Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 3,\n      className: \" mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"justify-content-center font-weight-bold mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"text-uppercase name-font\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 193\n      },\n      __self: this\n    }, student.name)), React.createElement(Row, {\n      className: \"justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, student.picture)), React.createElement(Col, {\n      className: \"ml-4 mt-4\",\n      lg: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(_Descriptions, {\n      title: \"User Information\",\n      bordered: true,\n      column: {\n        xxl: 4,\n        xl: 3,\n        lg: 3,\n        md: 3,\n        sm: 2,\n        xs: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, React.createElement(_Descriptions.Item, {\n      label: \"Role\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }, student.role), React.createElement(_Descriptions.Item, {\n      label: \"Status\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, student.status), React.createElement(_Descriptions.Item, {\n      label: \"Registered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, student.date), React.createElement(_Descriptions.Item, {\n      label: \"Rating\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, student.rate), React.createElement(_Descriptions.Item, {\n      label: \"Skills\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, student.skillCount), React.createElement(_Descriptions.Item, {\n      label: \"Wages\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, student.wages), React.createElement(_Descriptions.Item, {\n      label: \"Info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 225\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 226\n      },\n      __self: this\n    }, \"Email: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 227\n      },\n      __self: this\n    }), ' ', React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, student.email), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"Address: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 231\n      },\n      __self: this\n    }), ' ', React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }, student.address), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }), \" \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 233\n      },\n      __self: this\n    }, \"Skills: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }), \" \", React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 234\n      },\n      __self: this\n    }, skills), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 235\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, \"Introduction: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 238\n      },\n      __self: this\n    }, student.introduction))), React.createElement(Row, {\n      className: \"justify-content-end mt-4 mr-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 243\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      onClick: () => this.banUserAction(),\n      type: this.state.banAction ? 'primary' : 'danger',\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, this.state.banAction ? 'Unban' : 'Ban'))))))))));\n  }\n\n}\n\nexport default Contract;","map":{"version":3,"sources":["/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Contracts/Contract.js"],"names":["React","Component","useReducer","Card","CardBody","CardHeader","Col","Row","Table","LoadingOverlay","Contract","constructor","props","componentDidMount","token","JSON","parse","localStorage","getItem","setState","getContract","student","banAction","getBadge","status","loading","requestOptions","method","headers","Authorization","response","fetch","state","id","contractData","handleResponse","console","log","err","banUserAction","_id","data","date","Date","toLocaleString","tutor","componentWillMount","match","params","text","then","ok","render","colors","skills","count","map","item","color","length","skillTag","push","details","name","email","address","role","wages","introduction","overlay","base","background","spinner","width","stroke","picture","xxl","xl","lg","md","sm","xs","rate","skillCount"],"mappings":"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","sourcesContent":["import React, { Component, useReducer } from 'react';\nimport { Card, CardBody, CardHeader, Col, Row, Table } from 'reactstrap';\nimport { Badge, Button, Descriptions, Tag } from 'antd';\nimport LoadingOverlay from 'react-loading-overlay';\n\nclass Contract extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: null,\n      loading: true,\n      banAction: false,\n      contractData: [],\n      student: null,\n      tutor: null,\n      token: null,\n      id: null\n    };\n  }\n\n  componentWillMount() {\n    const { id } = this.props.match.params;\n    this.setState({ id });\n  }\n\n  componentDidMount = async () => {\n    const token = JSON.parse(localStorage.getItem('token'));\n    if (token) this.setState({ token });\n    await this.getContract(token);\n    let student = null;\n    let banAction = false;\n  };\n\n  getBadge = status => {\n    return status === 'active'\n      ? 'success'\n      : status === 'inactive'\n      ? 'default'\n      : status === 'banned'\n      ? 'error'\n      : 'primary';\n  };\n\n  getContract = async token => {\n    this.setState({ loading: true });\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        `https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/contracts/${this.state.id}`,\n        requestOptions\n      );\n\n      let contractData = await this.handleResponse(response);\n      console.log(contractData);\n      this.setState({\n        loading: false,\n        contractData: contractData,\n        student: contractData.student\n      });\n    } catch (err) {\n      return err;\n    }\n  };\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n      if (!response.ok) {\n        if (response.status === 401) {\n          // auto logout if 401 response returned from api\n          // logoutUser();\n        }\n\n        // const error = (data && data.message) || response.statusText;\n        // return Promise.reject(error);\n        return data;\n      }\n      return data;\n    });\n  }\n\n  banUserAction = async () => {\n    this.setState({ loading: true });\n    const requestOptions = {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.state.token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        `https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/ban-student/${this.state.student._id}`,\n        requestOptions\n      );\n\n      const data = await this.handleResponse(response);\n      let student = this.state.student;\n      const date = new Date(student.date);\n      student.date = date.toLocaleString();\n      student.status = <Badge status={this.getBadge(data)} text={data}></Badge>;\n\n      this.setState({\n        loading: false,\n        student,\n        banAction: !this.state.banAction\n      });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  render() {\n    const colors = [\n      'magenta',\n      'cyan',\n      'green',\n      'volcano',\n      'orange',\n      'purple',\n      'lime',\n      'red',\n      'blue',\n      'gold',\n      'geekblue'\n    ];\n    let student = this.state.student;\n    let skills = [];\n    if (student) {\n      let count = -1;\n      student.skills.map(item => {\n        const color = colors[++count % colors.length];\n        const skillTag = <Tag color={color}>{item}</Tag>;\n        skills.push(skillTag);\n      });\n    }\n    if (!student) {\n      student = { id: 'Not found' };\n    }\n\n    const details = [\n      ['Name', student.name],\n      ['Email', student.email],\n      ['Address', student.address],\n      ['Role', student.role],\n      ['Skills', student.skills],\n      ['Date registered', student.date],\n      ['Wages', student.wages],\n      ['Status', student.status],\n      ['Introduction', student.introduction]\n    ];\n\n    return (\n      <div className=\"animated fadeIn\">\n        <LoadingOverlay\n          active={this.state.loading}\n          spinner\n          text=\"Loading...\"\n          styles={{\n            overlay: base => ({\n              ...base,\n              background: 'rgba(255, 255, 255, 0.5)',\n              color: 'black'\n            }),\n            spinner: base => ({\n              ...base,\n              width: '100px',\n              '& svg circle': {\n                stroke: 'rgba(255, 0, 0, 0.5)'\n              }\n            })\n          }}\n        >\n          <Row className=\"justify-content-center\">\n            <Col lg={12}>\n              <Card>\n                <CardHeader className=\"bg-dark\">\n                  <strong>\n                    <i className=\"icon-info pr-1\"></i>Contract ID:{' '}\n                    {this.props.match.params.id}\n                  </strong>\n                </CardHeader>\n                <CardBody>\n                  <Row>\n                    <Col lg={3} className=\" mt-4\">\n                      <Row className=\"justify-content-center font-weight-bold mb-3\">\n                        <h2 className=\"text-uppercase name-font\">\n                          {student.name}\n                        </h2>\n                      </Row>\n                      <Row className=\"justify-content-center\">\n                        {student.picture}\n                      </Row>\n                    </Col>\n                    <Col className=\"ml-4 mt-4\" lg={8}>\n                      <Descriptions\n                        title=\"User Information\"\n                        bordered\n                        column={{ xxl: 4, xl: 3, lg: 3, md: 3, sm: 2, xs: 1 }}\n                      >\n                        <Descriptions.Item label=\"Role\">\n                          {student.role}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Status\">\n                          {student.status}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Registered\">\n                          {student.date}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Rating\">\n                          {student.rate}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Skills\">\n                          {student.skillCount}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Wages\">\n                          {student.wages}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Info\">\n                          <strong>Email: </strong>\n                          <br />{' '}\n                          <span className=\"ml-4 mb-2\">{student.email}</span>\n                          <br />\n                          <strong>Address: </strong>\n                          <br />{' '}\n                          <span className=\"ml-4 mb-2\">{student.address}</span>\n                          <br /> <strong>Skills: </strong>\n                          <br /> <span className=\"ml-4 mb-2\">{skills}</span>\n                          <br />\n                          <strong>Introduction: </strong>\n                          <br />\n                          <span className=\"ml-4 mb-2\">\n                            {student.introduction}\n                          </span>\n                        </Descriptions.Item>\n                      </Descriptions>\n                      <Row className=\"justify-content-end mt-4 mr-2\">\n                        <Button\n                          onClick={() => this.banUserAction()}\n                          type={this.state.banAction ? 'primary' : 'danger'}\n                        >\n                          {this.state.banAction ? 'Unban' : 'Ban'}\n                        </Button>\n                      </Row>\n                    </Col>\n                  </Row>\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </LoadingOverlay>\n      </div>\n    );\n  }\n}\n\nexport default Contract;\n"]},"metadata":{},"sourceType":"module"}