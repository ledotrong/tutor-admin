{"ast":null,"code":"import \"antd/es/timeline/style\";\nimport _Timeline from \"antd/es/timeline\";\nimport \"antd/es/descriptions/style\";\nimport _Descriptions from \"antd/es/descriptions\";\nimport \"antd/es/button/style\";\nimport _Button from \"antd/es/button\";\nimport _objectSpread from \"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport \"antd/es/badge/style\";\nimport _Badge from \"antd/es/badge\";\nimport \"antd/es/tag/style\";\nimport _Tag from \"antd/es/tag\";\nvar _jsxFileName = \"/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Contracts/Contract.js\";\nimport React, { Component, useReducer } from 'react';\nimport { Card, CardBody, CardHeader, Col, Row, Table } from 'reactstrap';\nimport { Link } from 'react-router-dom';\nimport LoadingOverlay from 'react-loading-overlay';\n\nclass Contract extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentDidMount = async () => {\n      const token = JSON.parse(localStorage.getItem('token'));\n      if (token) this.setState({\n        token\n      });\n      await this.getContract(token);\n      let student = null;\n      let banAction = false;\n    };\n\n    this.getBadge = status => {\n      return status === 'active' ? 'success' : status === 'inactive' ? 'default' : status === 'banned' ? 'error' : 'primary';\n    };\n\n    this.getContract = async token => {\n      this.setState({\n        loading: true\n      });\n      const requestOptions = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${token}`\n        }\n      };\n\n      try {\n        const response = await fetch(`https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/contracts/${this.state.id}`, requestOptions);\n        let contractData = await this.handleResponse(response);\n        this.setState({\n          loading: false,\n          contractData: contractData\n        });\n      } catch (err) {\n        return err;\n      }\n    };\n\n    this.getBadge = status => {\n      return status === 'active' ? 'success' : status === 'inactive' ? 'default' : status === 'banned' ? 'error' : 'primary';\n    };\n\n    this.getBadge2 = status => {\n      return status === 'request' ? 'success' : status === 'finished' ? 'default' : status === 'complain' ? 'error' : 'primary';\n    };\n\n    this.state = {\n      token: null,\n      loading: true,\n      banAction: false,\n      contractData: [],\n      token: null,\n      id: null\n    };\n  }\n\n  componentWillMount() {\n    const id = this.props.match.params.id;\n    this.setState({\n      id\n    });\n  }\n\n  async handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n\n      if (!response.ok) {\n        if (response.status === 401) {} // auto logout if 401 response returned from api\n        // logoutUser();\n        // const error = (data && data.message) || response.statusText;\n        // return Promise.reject(error);\n\n\n        return data;\n      }\n\n      return data;\n    });\n  }\n\n  render() {\n    const colors = ['magenta', 'cyan', 'green', 'volcano', 'orange', 'purple', 'lime', 'red', 'blue', 'gold', 'geekblue'];\n    let _this$state$contractD = this.state.contractData,\n        student = _this$state$contractD.student,\n        tutor = _this$state$contractD.tutor,\n        contract = _this$state$contractD.contract;\n    let skills = [];\n    let tutorSkills = [];\n    let date;\n    let statusHistory = [];\n\n    if (student) {\n      let count = -1;\n      student.skills.map(item => {\n        const color = colors[++count % colors.length];\n        const skillTag = React.createElement(_Tag, {\n          color: color,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, item);\n        skills.push(skillTag);\n      });\n    }\n\n    if (tutor) {\n      let count = -1;\n      tutor.skills.map(item => {\n        const color = colors[++count % colors.length];\n        const skillTag = React.createElement(_Tag, {\n          color: color,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 133\n          },\n          __self: this\n        }, item);\n        tutorSkills.push(skillTag);\n      });\n    }\n\n    if (!student) {\n      student = {\n        id: 'Not found'\n      };\n    } else {\n      student.address = Object.values(student.address).join(', ');\n      student.picture = React.createElement(\"img\", {\n        src: student.picture,\n        style: {\n          height: 200,\n          width: 200,\n          objectFit: 'cover',\n          borderRadius: 125\n        },\n        alt: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142\n        },\n        __self: this\n      });\n      student.status = React.createElement(_Badge, {\n        status: this.getBadge(student.status),\n        text: student.status,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 154\n        },\n        __self: this\n      });\n    }\n\n    if (!tutor) {\n      tutor = {\n        id: 'Not found'\n      };\n    } else {\n      tutor.address = Object.values(tutor.address).join(', ');\n      tutor.picture = React.createElement(\"img\", {\n        src: tutor.picture,\n        style: {\n          height: 200,\n          width: 200,\n          objectFit: 'cover',\n          borderRadius: 125\n        },\n        alt: \"profile\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166\n        },\n        __self: this\n      });\n      tutor.status = React.createElement(_Badge, {\n        status: this.getBadge(tutor.status),\n        text: tutor.status,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178\n        },\n        __self: this\n      });\n    }\n\n    if (!contract) {\n      contract = {\n        id: 'Not found'\n      };\n    } else {\n      date = new Date(contract.contractCreationDate);\n      date = date.toLocaleDateString();\n      statusHistory = contract.statusHistory;\n    }\n\n    return React.createElement(\"div\", {\n      className: \"animated fadeIn\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }, React.createElement(LoadingOverlay, {\n      active: this.state.loading,\n      spinner: true,\n      text: \"Loading...\",\n      styles: {\n        overlay: base => _objectSpread({}, base, {\n          background: 'rgba(255, 255, 255, 0.5)',\n          color: 'black'\n        }),\n        spinner: base => _objectSpread({}, base, {\n          width: '100px',\n          '& svg circle': {\n            stroke: 'rgba(255, 0, 0, 0.5)'\n          }\n        })\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 12,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(Card, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(CardHeader, {\n      className: \"bg-dark\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      className: \"icon-info pr-1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 215\n      },\n      __self: this\n    }), \"Contract ID:\", ' ', this.props.match.params.id)), React.createElement(CardBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      style: {\n        border: 'solid 1px grey',\n        paddingBottom: '20px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"justify-content-center mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 223\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      className: \"text-uppercase font-weight-bold\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 224\n      },\n      __self: this\n    }, \"Contract\")), React.createElement(Row, {\n      className: \"justify-content-center mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      className: \"\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \"status:\", ' ', contract ? React.createElement(_Badge, {\n      status: this.getBadge2(contract.currentStatus),\n      text: contract.currentStatus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 232\n      },\n      __self: this\n    }) : null)), React.createElement(Row, {\n      className: \"justify-content-end mb-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      style: {\n        paddingRight: '100px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }, contract ? date : null)), React.createElement(Row, {\n      className: \"justify-content-center\",\n      style: {\n        paddingLeft: '40px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: \"mt-4 mb-4 justify-content-center\",\n      lg: 10,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }, React.createElement(_Descriptions, {\n      title: \"Contract Info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 249\n      },\n      __self: this\n    }, React.createElement(_Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }, \"Messages\"), React.createElement(_Descriptions.Item, {\n      label: \"Student\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 252\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: contract ? `/users/${contract.studentID}` : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 253\n      },\n      __self: this\n    }, contract ? contract.studentName : null)), React.createElement(_Descriptions.Item, {\n      label: \"Tutor\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 261\n      },\n      __self: this\n    }, React.createElement(Link, {\n      to: contract ? `/users/${contract.tutorID}` : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 262\n      },\n      __self: this\n    }, contract ? contract.tutorName : null), ' '), React.createElement(_Descriptions.Item, {\n      label: \"Created\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 270\n      },\n      __self: this\n    }, contract ? date : null), React.createElement(_Descriptions.Item, {\n      label: \"Skill\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 273\n      },\n      __self: this\n    }, contract ? contract.skill : null), React.createElement(_Descriptions.Item, {\n      label: \"Price\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 276\n      },\n      __self: this\n    }, contract ? contract.price + ' VND' : null), React.createElement(_Descriptions.Item, {\n      label: \"Status\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 279\n      },\n      __self: this\n    }, contract ? React.createElement(_Badge, {\n      status: this.getBadge2(contract.currentStatus),\n      text: contract.currentStatus,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 281\n      },\n      __self: this\n    }) : null), React.createElement(_Descriptions.Item, {\n      label: \"History\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, React.createElement(_Timeline, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, statusHistory.map(item => {\n      return React.createElement(_Timeline.Item, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 291\n        },\n        __self: this\n      }, \"[\", new Date(item.date).toLocaleDateString(), \"]\", ' - ', item.content);\n    })))))), React.createElement(\"div\", {\n      style: {\n        padding: '50px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 303\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"pa-4 justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 304\n      },\n      __self: this\n    }, React.createElement(Col, {\n      lg: 3,\n      className: \" mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 305\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"justify-content-center font-weight-bold mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 306\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"text-uppercase name-font\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 307\n      },\n      __self: this\n    }, student.name)), React.createElement(Row, {\n      className: \"justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 311\n      },\n      __self: this\n    }, student.picture)), React.createElement(Col, {\n      className: \"ml-4 mt-4\",\n      lg: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 315\n      },\n      __self: this\n    }, React.createElement(_Descriptions, {\n      title: \"Student Information\",\n      bordered: true,\n      column: {\n        xxl: 4,\n        xl: 3,\n        lg: 3,\n        md: 3,\n        sm: 2,\n        xs: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 316\n      },\n      __self: this\n    }, React.createElement(_Descriptions.Item, {\n      label: \"Role\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 328\n      },\n      __self: this\n    }, student.role), React.createElement(_Descriptions.Item, {\n      label: \"Status\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 331\n      },\n      __self: this\n    }, student.status), React.createElement(_Descriptions.Item, {\n      label: \"Registered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 334\n      },\n      __self: this\n    }, new Date(student.date).toLocaleString()), React.createElement(_Descriptions.Item, {\n      label: \"Info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, \"Email: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }), ' ', React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, student.email), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 342\n      },\n      __self: this\n    }, \"Address: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    }), ' ', React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 344\n      },\n      __self: this\n    }, student.address), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }), \" \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347\n      },\n      __self: this\n    }, \"Skills: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }), \" \", React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348\n      },\n      __self: this\n    }, skills), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350\n      },\n      __self: this\n    }, \"Introduction: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 351\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 352\n      },\n      __self: this\n    }, student.introduction))))), React.createElement(Row, {\n      className: \"pa-4 justify-content-center\",\n      style: {\n        paddingTop: '40px'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 359\n      },\n      __self: this\n    }, React.createElement(Col, {\n      className: \"mr-4 mt-4\",\n      lg: 8,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 363\n      },\n      __self: this\n    }, React.createElement(_Descriptions, {\n      title: \"Tutor Information\",\n      bordered: true,\n      column: {\n        xxl: 4,\n        xl: 3,\n        lg: 3,\n        md: 3,\n        sm: 2,\n        xs: 1\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 364\n      },\n      __self: this\n    }, React.createElement(_Descriptions.Item, {\n      label: \"Role\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 376\n      },\n      __self: this\n    }, tutor.role), React.createElement(_Descriptions.Item, {\n      label: \"Status\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 379\n      },\n      __self: this\n    }, tutor.status), React.createElement(_Descriptions.Item, {\n      label: \"Registered\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 382\n      },\n      __self: this\n    }, new Date(tutor.date).toLocaleString()), React.createElement(_Descriptions.Item, {\n      label: \"Info\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 385\n      },\n      __self: this\n    }, React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 386\n      },\n      __self: this\n    }, \"Email: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 387\n      },\n      __self: this\n    }), ' ', React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 388\n      },\n      __self: this\n    }, tutor.email), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 389\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 390\n      },\n      __self: this\n    }, \"Address: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 391\n      },\n      __self: this\n    }), ' ', React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 392\n      },\n      __self: this\n    }, tutor.address), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }), \" \", React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 393\n      },\n      __self: this\n    }, \"Skills: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 394\n      },\n      __self: this\n    }), ' ', React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 395\n      },\n      __self: this\n    }, tutorSkills), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 396\n      },\n      __self: this\n    }), React.createElement(\"strong\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 397\n      },\n      __self: this\n    }, \"Introduction: \"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 398\n      },\n      __self: this\n    }), React.createElement(\"span\", {\n      className: \"ml-4 mb-2\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 399\n      },\n      __self: this\n    }, tutor.introduction)))), React.createElement(Col, {\n      lg: 3,\n      className: \" mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 405\n      },\n      __self: this\n    }, React.createElement(Row, {\n      className: \"justify-content-center font-weight-bold mb-3\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 406\n      },\n      __self: this\n    }, React.createElement(\"h2\", {\n      className: \"text-uppercase name-font\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 407\n      },\n      __self: this\n    }, tutor.name)), React.createElement(Row, {\n      className: \"justify-content-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411\n      },\n      __self: this\n    }, tutor.picture)))))))))));\n  }\n\n}\n\nexport default Contract;","map":{"version":3,"sources":["/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Contracts/Contract.js"],"names":["React","Component","useReducer","Card","CardBody","CardHeader","Col","Row","Table","Link","LoadingOverlay","Contract","constructor","props","componentDidMount","token","JSON","parse","localStorage","getItem","setState","getContract","student","banAction","getBadge","status","loading","requestOptions","method","headers","Authorization","response","fetch","state","id","contractData","handleResponse","err","getBadge2","componentWillMount","match","params","text","then","data","ok","render","colors","tutor","contract","skills","tutorSkills","date","statusHistory","count","map","item","color","length","skillTag","push","address","Object","values","join","picture","height","width","objectFit","borderRadius","Date","contractCreationDate","toLocaleDateString","overlay","base","background","spinner","stroke","border","paddingBottom","currentStatus","paddingRight","paddingLeft","studentID","studentName","tutorID","tutorName","skill","price","content","padding","name","xxl","xl","lg","md","sm","xs","role","toLocaleString","email","introduction","paddingTop"],"mappings":"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","sourcesContent":["import React, { Component, useReducer } from 'react';\nimport { Card, CardBody, CardHeader, Col, Row, Table } from 'reactstrap';\nimport { Badge, Button, Descriptions, Tag, Timeline } from 'antd';\nimport { Link } from 'react-router-dom';\nimport LoadingOverlay from 'react-loading-overlay';\n\nclass Contract extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: null,\n      loading: true,\n      banAction: false,\n      contractData: [],\n      token: null,\n      id: null\n    };\n  }\n\n  componentWillMount() {\n    const { id } = this.props.match.params;\n    this.setState({ id });\n  }\n\n  componentDidMount = async () => {\n    const token = JSON.parse(localStorage.getItem('token'));\n    if (token) this.setState({ token });\n    await this.getContract(token);\n    let student = null;\n    let banAction = false;\n  };\n\n  getBadge = status => {\n    return status === 'active'\n      ? 'success'\n      : status === 'inactive'\n      ? 'default'\n      : status === 'banned'\n      ? 'error'\n      : 'primary';\n  };\n\n  getContract = async token => {\n    this.setState({ loading: true });\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        `https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/contracts/${this.state.id}`,\n        requestOptions\n      );\n\n      let contractData = await this.handleResponse(response);\n      this.setState({ loading: false, contractData: contractData });\n    } catch (err) {\n      return err;\n    }\n  };\n\n  async handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n      if (!response.ok) {\n        if (response.status === 401) {\n          // auto logout if 401 response returned from api\n          // logoutUser();\n        }\n\n        // const error = (data && data.message) || response.statusText;\n        // return Promise.reject(error);\n        return data;\n      }\n      return data;\n    });\n  }\n\n  getBadge = status => {\n    return status === 'active'\n      ? 'success'\n      : status === 'inactive'\n      ? 'default'\n      : status === 'banned'\n      ? 'error'\n      : 'primary';\n  };\n\n  getBadge2 = status => {\n    return status === 'request'\n      ? 'success'\n      : status === 'finished'\n      ? 'default'\n      : status === 'complain'\n      ? 'error'\n      : 'primary';\n  };\n\n  render() {\n    const colors = [\n      'magenta',\n      'cyan',\n      'green',\n      'volcano',\n      'orange',\n      'purple',\n      'lime',\n      'red',\n      'blue',\n      'gold',\n      'geekblue'\n    ];\n    let { student, tutor, contract } = this.state.contractData;\n    let skills = [];\n    let tutorSkills = [];\n    let date;\n    let statusHistory = [];\n    if (student) {\n      let count = -1;\n      student.skills.map(item => {\n        const color = colors[++count % colors.length];\n        const skillTag = <Tag color={color}>{item}</Tag>;\n        skills.push(skillTag);\n      });\n    }\n    if (tutor) {\n      let count = -1;\n      tutor.skills.map(item => {\n        const color = colors[++count % colors.length];\n        const skillTag = <Tag color={color}>{item}</Tag>;\n        tutorSkills.push(skillTag);\n      });\n    }\n    if (!student) {\n      student = { id: 'Not found' };\n    } else {\n      student.address = Object.values(student.address).join(', ');\n      student.picture = (\n        <img\n          src={student.picture}\n          style={{\n            height: 200,\n            width: 200,\n            objectFit: 'cover',\n            borderRadius: 125\n          }}\n          alt=\"profile\"\n        />\n      );\n      student.status = (\n        <Badge\n          status={this.getBadge(student.status)}\n          text={student.status}\n        ></Badge>\n      );\n    }\n\n    if (!tutor) {\n      tutor = { id: 'Not found' };\n    } else {\n      tutor.address = Object.values(tutor.address).join(', ');\n      tutor.picture = (\n        <img\n          src={tutor.picture}\n          style={{\n            height: 200,\n            width: 200,\n            objectFit: 'cover',\n            borderRadius: 125\n          }}\n          alt=\"profile\"\n        />\n      );\n      tutor.status = (\n        <Badge status={this.getBadge(tutor.status)} text={tutor.status}></Badge>\n      );\n    }\n    if (!contract) {\n      contract = { id: 'Not found' };\n    } else {\n      date = new Date(contract.contractCreationDate);\n      date = date.toLocaleDateString();\n      statusHistory = contract.statusHistory;\n    }\n\n    return (\n      <div className=\"animated fadeIn\">\n        <LoadingOverlay\n          active={this.state.loading}\n          spinner\n          text=\"Loading...\"\n          styles={{\n            overlay: base => ({\n              ...base,\n              background: 'rgba(255, 255, 255, 0.5)',\n              color: 'black'\n            }),\n            spinner: base => ({\n              ...base,\n              width: '100px',\n              '& svg circle': {\n                stroke: 'rgba(255, 0, 0, 0.5)'\n              }\n            })\n          }}\n        >\n          <Row className=\"justify-content-center\">\n            <Col lg={12}>\n              <Card>\n                <CardHeader className=\"bg-dark\">\n                  <strong>\n                    <i className=\"icon-info pr-1\"></i>Contract ID:{' '}\n                    {this.props.match.params.id}\n                  </strong>\n                </CardHeader>\n                <CardBody>\n                  <div\n                    style={{ border: 'solid 1px grey', paddingBottom: '20px' }}\n                  >\n                    <Row className=\"justify-content-center mt-4\">\n                      <h1 className=\"text-uppercase font-weight-bold\">\n                        Contract\n                      </h1>\n                    </Row>\n                    <Row className=\"justify-content-center mb-4\">\n                      <h5 className=\"\">\n                        status:{' '}\n                        {contract ? (\n                          <Badge\n                            status={this.getBadge2(contract.currentStatus)}\n                            text={contract.currentStatus}\n                          ></Badge>\n                        ) : null}\n                      </h5>\n                    </Row>\n                    <Row className=\"justify-content-end mb-4\">\n                      <h4 style={{ paddingRight: '100px' }}>\n                        {contract ? date : null}\n                      </h4>\n                    </Row>\n                    <Row\n                      className=\"justify-content-center\"\n                      style={{ paddingLeft: '40px' }}\n                    >\n                      <Col className=\"mt-4 mb-4 justify-content-center\" lg={10}>\n                        <Descriptions title=\"Contract Info\">\n                          <Button>Messages</Button>\n\n                          <Descriptions.Item label=\"Student\">\n                            <Link\n                              to={\n                                contract ? `/users/${contract.studentID}` : null\n                              }\n                            >\n                              {contract ? contract.studentName : null}\n                            </Link>\n                          </Descriptions.Item>\n                          <Descriptions.Item label=\"Tutor\">\n                            <Link\n                              to={\n                                contract ? `/users/${contract.tutorID}` : null\n                              }\n                            >\n                              {contract ? contract.tutorName : null}\n                            </Link>{' '}\n                          </Descriptions.Item>\n                          <Descriptions.Item label=\"Created\">\n                            {contract ? date : null}\n                          </Descriptions.Item>\n                          <Descriptions.Item label=\"Skill\">\n                            {contract ? contract.skill : null}\n                          </Descriptions.Item>\n                          <Descriptions.Item label=\"Price\">\n                            {contract ? contract.price + ' VND' : null}\n                          </Descriptions.Item>\n                          <Descriptions.Item label=\"Status\">\n                            {contract ? (\n                              <Badge\n                                status={this.getBadge2(contract.currentStatus)}\n                                text={contract.currentStatus}\n                              ></Badge>\n                            ) : null}\n                          </Descriptions.Item>\n                          <Descriptions.Item label=\"History\">\n                            <Timeline>\n                              {statusHistory.map(item => {\n                                return (\n                                  <Timeline.Item>\n                                    [{new Date(item.date).toLocaleDateString()}]\n                                    {' - '}\n                                    {item.content}\n                                  </Timeline.Item>\n                                );\n                              })}\n                            </Timeline>\n                          </Descriptions.Item>\n                        </Descriptions>\n                      </Col>\n                    </Row>\n                    <div style={{ padding: '50px' }}>\n                      <Row className=\"pa-4 justify-content-center\">\n                        <Col lg={3} className=\" mt-4\">\n                          <Row className=\"justify-content-center font-weight-bold mb-3\">\n                            <h2 className=\"text-uppercase name-font\">\n                              {student.name}\n                            </h2>\n                          </Row>\n                          <Row className=\"justify-content-center\">\n                            {student.picture}\n                          </Row>\n                        </Col>\n                        <Col className=\"ml-4 mt-4\" lg={8}>\n                          <Descriptions\n                            title=\"Student Information\"\n                            bordered\n                            column={{\n                              xxl: 4,\n                              xl: 3,\n                              lg: 3,\n                              md: 3,\n                              sm: 2,\n                              xs: 1\n                            }}\n                          >\n                            <Descriptions.Item label=\"Role\">\n                              {student.role}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"Status\">\n                              {student.status}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"Registered\">\n                              {new Date(student.date).toLocaleString()}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"Info\">\n                              <strong>Email: </strong>\n                              <br />{' '}\n                              <span className=\"ml-4 mb-2\">{student.email}</span>\n                              <br />\n                              <strong>Address: </strong>\n                              <br />{' '}\n                              <span className=\"ml-4 mb-2\">\n                                {student.address}\n                              </span>\n                              <br /> <strong>Skills: </strong>\n                              <br /> <span className=\"ml-4 mb-2\">{skills}</span>\n                              <br />\n                              <strong>Introduction: </strong>\n                              <br />\n                              <span className=\"ml-4 mb-2\">\n                                {student.introduction}\n                              </span>\n                            </Descriptions.Item>\n                          </Descriptions>\n                        </Col>\n                      </Row>\n                      <Row\n                        className=\"pa-4 justify-content-center\"\n                        style={{ paddingTop: '40px' }}\n                      >\n                        <Col className=\"mr-4 mt-4\" lg={8}>\n                          <Descriptions\n                            title=\"Tutor Information\"\n                            bordered\n                            column={{\n                              xxl: 4,\n                              xl: 3,\n                              lg: 3,\n                              md: 3,\n                              sm: 2,\n                              xs: 1\n                            }}\n                          >\n                            <Descriptions.Item label=\"Role\">\n                              {tutor.role}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"Status\">\n                              {tutor.status}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"Registered\">\n                              {new Date(tutor.date).toLocaleString()}\n                            </Descriptions.Item>\n                            <Descriptions.Item label=\"Info\">\n                              <strong>Email: </strong>\n                              <br />{' '}\n                              <span className=\"ml-4 mb-2\">{tutor.email}</span>\n                              <br />\n                              <strong>Address: </strong>\n                              <br />{' '}\n                              <span className=\"ml-4 mb-2\">{tutor.address}</span>\n                              <br /> <strong>Skills: </strong>\n                              <br />{' '}\n                              <span className=\"ml-4 mb-2\">{tutorSkills}</span>\n                              <br />\n                              <strong>Introduction: </strong>\n                              <br />\n                              <span className=\"ml-4 mb-2\">\n                                {tutor.introduction}\n                              </span>\n                            </Descriptions.Item>\n                          </Descriptions>\n                        </Col>\n                        <Col lg={3} className=\" mt-4\">\n                          <Row className=\"justify-content-center font-weight-bold mb-3\">\n                            <h2 className=\"text-uppercase name-font\">\n                              {tutor.name}\n                            </h2>\n                          </Row>\n                          <Row className=\"justify-content-center\">\n                            {tutor.picture}\n                          </Row>\n                        </Col>\n                      </Row>\n                    </div>\n                  </div>\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </LoadingOverlay>\n      </div>\n    );\n  }\n}\n\nexport default Contract;\n"]},"metadata":{},"sourceType":"module"}