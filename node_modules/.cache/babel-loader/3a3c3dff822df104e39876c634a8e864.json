{"ast":null,"code":"var _jsxFileName = \"/Users/trongledo/Documents/GitHub/tutor-admin/src/containers/DefaultLayout/DefaultLayout.js\";\nimport React, { Component, Suspense } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport * as router from 'react-router-dom';\nimport { Container } from 'reactstrap';\nimport { AppFooter, AppHeader, AppBreadcrumb2 as AppBreadcrumb } from '@coreui/react'; // routes config\n\nimport routes from '../../routes';\nconst DefaultFooter = React.lazy(() => import('./DefaultFooter'));\nconst DefaultHeader = React.lazy(() => import('./DefaultHeader'));\n\nclass DefaultLayout extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentWillMount = async () => {\n      // const token = localStorage.removeItem(\"token\");\n      const token = JSON.parse(localStorage.getItem('token'));\n\n      if (token) {\n        this.setState({\n          token\n        });\n      } else {\n        this.props.history.push('/login');\n      }\n    };\n\n    this.componentDidMount = async () => {\n      if (this.state.token) {\n        const role = await this.getUsers();\n        localStorage.setItem('role', JSON.stringify(role));\n        console.log(JSON.parse(localStorage.getItem('role')));\n      } else {\n        this.props.history.push('/login');\n      }\n    };\n\n    this.getUsers = async () => {\n      const requestOptions = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.state.token}`\n        }\n      };\n\n      try {\n        const response = await fetch('https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me', requestOptions);\n        let userData = await this.handleResponse(response);\n        return userData.role;\n      } catch (err) {\n        return err;\n      }\n    };\n\n    this.loading = () => React.createElement(\"div\", {\n      className: \"animated fadeIn pt-1 text-center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }, \"Loading...\");\n\n    this.state = {\n      loading: true,\n      token: null\n    };\n  }\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n\n      if (!response.ok) {\n        if (response.status === 401) {\n          this.signOut();\n        }\n\n        return data;\n      }\n\n      return data;\n    });\n  }\n\n  signOut(e) {\n    localStorage.removeItem('token');\n    this.props.history.push('/login');\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"app google-font\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, React.createElement(AppHeader, {\n      fixed: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(Suspense, {\n      fallback: this.loading(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(DefaultHeader, {\n      onLogout: e => this.signOut(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"app-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"main\", {\n      className: \"main\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(AppBreadcrumb, {\n      appRoutes: routes,\n      router: router,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }), React.createElement(Container, {\n      fluid: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Suspense, {\n      fallback: this.loading(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(Switch, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, routes.map((route, idx) => {\n      return route.component ? React.createElement(Route, {\n        key: idx,\n        path: route.path,\n        exact: route.exact,\n        name: route.name,\n        render: props => React.createElement(route.component, Object.assign({}, props, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 112\n          },\n          __self: this\n        })),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 107\n        },\n        __self: this\n      }) : null;\n    }), React.createElement(Redirect, {\n      from: \"/\",\n      to: \"/users\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    })))))), React.createElement(AppFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    }, React.createElement(Suspense, {\n      fallback: this.loading(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(DefaultFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default DefaultLayout;","map":{"version":3,"sources":["/Users/trongledo/Documents/GitHub/tutor-admin/src/containers/DefaultLayout/DefaultLayout.js"],"names":["React","Component","Suspense","Redirect","Route","Switch","router","Container","AppFooter","AppHeader","AppBreadcrumb2","AppBreadcrumb","routes","DefaultFooter","lazy","DefaultHeader","DefaultLayout","constructor","props","componentWillMount","token","JSON","parse","localStorage","getItem","setState","history","push","componentDidMount","state","role","getUsers","setItem","stringify","console","log","requestOptions","method","headers","Authorization","response","fetch","userData","handleResponse","err","loading","text","then","data","ok","status","signOut","e","removeItem","render","map","route","idx","component","path","exact","name"],"mappings":"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","sourcesContent":["import React, { Component, Suspense } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport * as router from 'react-router-dom';\nimport { Container } from 'reactstrap';\n\nimport {\n  AppFooter,\n  AppHeader,\n  AppBreadcrumb2 as AppBreadcrumb\n} from '@coreui/react';\n// routes config\nimport routes from '../../routes';\n\nconst DefaultFooter = React.lazy(() => import('./DefaultFooter'));\nconst DefaultHeader = React.lazy(() => import('./DefaultHeader'));\n\nclass DefaultLayout extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      token: null\n    };\n  }\n\n  componentWillMount = async () => {\n    // const token = localStorage.removeItem(\"token\");\n    const token = JSON.parse(localStorage.getItem('token'));\n\n    if (token) {\n      this.setState({ token });\n    } else {\n      this.props.history.push('/login');\n    }\n  };\n\n  componentDidMount = async () => {\n    if (this.state.token) {\n      const role = await this.getUsers();\n      localStorage.setItem('role', JSON.stringify(role));\n      console.log(JSON.parse(localStorage.getItem('role')));\n    } else {\n      this.props.history.push('/login');\n    }\n  };\n\n  getUsers = async () => {\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.state.token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        'https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me',\n        requestOptions\n      );\n\n      let userData = await this.handleResponse(response);\n\n      return userData.role;\n    } catch (err) {\n      return err;\n    }\n  };\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n      if (!response.ok) {\n        if (response.status === 401) {\n          this.signOut();\n        }\n        return data;\n      }\n      return data;\n    });\n  }\n\n  loading = () => (\n    <div className=\"animated fadeIn pt-1 text-center\">Loading...</div>\n  );\n\n  signOut(e) {\n    localStorage.removeItem('token');\n    this.props.history.push('/login');\n  }\n\n  render() {\n    return (\n      <div className=\"app google-font\">\n        <AppHeader fixed>\n          <Suspense fallback={this.loading()}>\n            <DefaultHeader onLogout={e => this.signOut(e)} />\n          </Suspense>\n        </AppHeader>\n        <div className=\"app-body\">\n          <main className=\"main\">\n            <AppBreadcrumb appRoutes={routes} router={router} />\n            <Container fluid>\n              <Suspense fallback={this.loading()}>\n                <Switch>\n                  {routes.map((route, idx) => {\n                    return route.component ? (\n                      <Route\n                        key={idx}\n                        path={route.path}\n                        exact={route.exact}\n                        name={route.name}\n                        render={props => <route.component {...props} />}\n                      />\n                    ) : null;\n                  })}\n                  <Redirect from=\"/\" to=\"/users\" />\n                </Switch>\n              </Suspense>\n            </Container>\n          </main>\n        </div>\n        <AppFooter>\n          <Suspense fallback={this.loading()}>\n            <DefaultFooter />\n          </Suspense>\n        </AppFooter>\n      </div>\n    );\n  }\n}\n\nexport default DefaultLayout;\n"]},"metadata":{},"sourceType":"module"}