{"ast":null,"code":"import \"antd/es/row/style\";\nimport _Row from \"antd/es/row\";\nimport \"antd/es/select/style\";\nimport _Select from \"antd/es/select\";\nimport \"antd/es/typography/style\";\nimport _Typography from \"antd/es/typography\";\nvar _jsxFileName = \"/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Dashboard/Dashboard.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { MDBDataTable } from 'mdbreact';\nimport { Card, CardBody, CardHeader, Col } from 'reactstrap';\nimport LoadingOverlay from 'react-loading-overlay';\nimport { Chart, Tooltip, Axis, Point, SmoothLine } from 'viser-react';\nconst Text = _Typography.Text;\nconst Option = _Select.Option;\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n\n    this.componentWillMount = async () => {\n      // const token = localStorage.removeItem(\"token\");\n      const token = JSON.parse(localStorage.getItem('token'));\n\n      if (token) {\n        this.setState({\n          token\n        });\n      } else {\n        this.props.history.push('/login');\n      }\n    };\n\n    this.getRevenue = async () => {\n      const requestOptions = {\n        method: 'GET',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${this.state.token}`\n        }\n      };\n\n      try {\n        const response = await fetch('https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/revenue', requestOptions);\n        let revenue = await this.handleResponse(response);\n        console.log(revenue);\n        this.setState({\n          loading: false,\n          revenue: revenue\n        });\n      } catch (err) {\n        console.log(err);\n      }\n    };\n\n    this.state = {\n      token: null,\n      revenue: [],\n      loading: false\n    };\n  }\n\n  componentDidMount() {\n    const token = JSON.parse(localStorage.getItem('token'));\n    if (token) this.setState({\n      token\n    });\n    this.getRevenue();\n  }\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n\n      if (!response.ok) {\n        return false;\n      }\n\n      return data;\n    });\n  }\n\n  render() {\n    let data = [{\n      contract: '1',\n      value: 3\n    }, {\n      contract: '2',\n      value: 4\n    }, {\n      contract: '3',\n      value: 3.5\n    }, {\n      contract: '4',\n      value: 5\n    }, {\n      contract: '5',\n      value: 4.9\n    }, {\n      contract: '6',\n      value: 6\n    }, {\n      contract: '7',\n      value: 7\n    }, {\n      contract: '8',\n      value: 9\n    }, {\n      contract: '9',\n      value: 13\n    }, {\n      contract: '1',\n      value: 3\n    }, {\n      contract: '2',\n      value: 4\n    }, {\n      contract: '3',\n      value: 3.5\n    }, {\n      contract: '4',\n      value: 5\n    }, {\n      contract: '5',\n      value: 4.9\n    }, {\n      contract: '6',\n      value: 6\n    }, {\n      contract: '7',\n      value: 7\n    }, {\n      contract: '8',\n      value: 9\n    }, {\n      contract: '9',\n      value: 13\n    }, {\n      contract: '1',\n      value: 3\n    }];\n\n    if (this.state.revenue.length) {\n      data = [];\n      const revenue = this.state.revenue;\n      revenue.forEach((item, index) => {\n        data.push({\n          constract: index + 1,\n          value: item.price\n        });\n      });\n      console.log(data);\n    }\n\n    const scale = [{\n      dataKey: 'value',\n      min: 0\n    }, {\n      dataKey: 'contract',\n      min: 0,\n      max: 10\n    }];\n    return React.createElement(\"div\", {\n      className: \"animated fadeIn mt-4\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(_Row, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }, React.createElement(Col, {\n      xl: 6,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }, React.createElement(Chart, {\n      forceFit: true,\n      height: 400,\n      data: data,\n      scale: scale,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(Tooltip, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }), React.createElement(Axis, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }), React.createElement(SmoothLine, {\n      position: \"contract*value\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }), React.createElement(Point, {\n      position: \"contract*value\",\n      shape: \"circle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })))));\n  }\n\n}\n\nexport default Dashboard;","map":{"version":3,"sources":["/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Dashboard/Dashboard.js"],"names":["React","Component","Link","MDBDataTable","Card","CardBody","CardHeader","Col","LoadingOverlay","Chart","Tooltip","Axis","Point","SmoothLine","Text","Option","Dashboard","constructor","props","componentWillMount","token","JSON","parse","localStorage","getItem","setState","history","push","getRevenue","requestOptions","method","headers","Authorization","state","response","fetch","revenue","handleResponse","console","log","loading","err","componentDidMount","text","then","data","ok","render","contract","value","length","forEach","item","index","constract","price","scale","dataKey","min","max"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport { MDBDataTable } from 'mdbreact';\nimport { Card, CardBody, CardHeader, Col } from 'reactstrap';\nimport LoadingOverlay from 'react-loading-overlay';\nimport { Radio, Row, Typography, Button, Tag, Select } from 'antd';\nimport { Chart, Tooltip, Axis, Point, SmoothLine } from 'viser-react';\n\nconst { Text } = Typography;\nconst { Option } = Select;\n\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: null,\n      revenue: [],\n      loading: false\n    };\n  }\n\n  componentWillMount = async () => {\n    // const token = localStorage.removeItem(\"token\");\n    const token = JSON.parse(localStorage.getItem('token'));\n\n    if (token) {\n      this.setState({ token });\n    } else {\n      this.props.history.push('/login');\n    }\n  };\n\n  componentDidMount() {\n    const token = JSON.parse(localStorage.getItem('token'));\n    if (token) this.setState({ token });\n    this.getRevenue();\n  }\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n      if (!response.ok) {\n        return false;\n      }\n      return data;\n    });\n  }\n\n  getRevenue = async () => {\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.state.token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        'https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/revenue',\n        requestOptions\n      );\n\n      let revenue = await this.handleResponse(response);\n      console.log(revenue);\n      this.setState({ loading: false, revenue: revenue });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  render() {\n    let data = [\n      { contract: '1', value: 3 },\n      { contract: '2', value: 4 },\n      { contract: '3', value: 3.5 },\n      { contract: '4', value: 5 },\n      { contract: '5', value: 4.9 },\n      { contract: '6', value: 6 },\n      { contract: '7', value: 7 },\n      { contract: '8', value: 9 },\n      { contract: '9', value: 13 },\n      { contract: '1', value: 3 },\n      { contract: '2', value: 4 },\n      { contract: '3', value: 3.5 },\n      { contract: '4', value: 5 },\n      { contract: '5', value: 4.9 },\n      { contract: '6', value: 6 },\n      { contract: '7', value: 7 },\n      { contract: '8', value: 9 },\n      { contract: '9', value: 13 },\n      { contract: '1', value: 3 }\n    ];\n    if (this.state.revenue.length) {\n      data = [];\n      const revenue = this.state.revenue;\n      revenue.forEach((item, index) => {\n        data.push({ constract: index + 1, value: item.price });\n      });\n      console.log(data);\n    }\n\n    const scale = [\n      {\n        dataKey: 'value',\n        min: 0\n      },\n      {\n        dataKey: 'contract',\n        min: 0,\n        max: 10\n      }\n    ];\n\n    return (\n      <div className=\"animated fadeIn mt-4\">\n        <Row>\n          <Col xl={6}>\n            <Chart forceFit height={400} data={data} scale={scale}>\n              <Tooltip />\n              <Axis />\n              <SmoothLine position=\"contract*value\" />\n              <Point position=\"contract*value\" shape=\"circle\" />\n            </Chart>\n          </Col>\n        </Row>\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}