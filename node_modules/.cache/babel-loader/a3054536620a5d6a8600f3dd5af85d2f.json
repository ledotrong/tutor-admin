{"ast":null,"code":"import\"antd/es/button/style\";import _Button from\"antd/es/button\";import\"antd/es/descriptions/style\";import _Descriptions from\"antd/es/descriptions\";import _objectSpread from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import\"antd/es/tag/style\";import _Tag from\"antd/es/tag\";import _defineProperty from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import\"antd/es/badge/style\";import _Badge from\"antd/es/badge\";import _classCallCheck from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component,useReducer}from'react';import{Card,CardBody,CardHeader,Col,Row,Table}from'reactstrap';import LoadingOverlay from'react-loading-overlay';var User=/*#__PURE__*/function(_Component){_inherits(User,_Component);function User(props){var _this;_classCallCheck(this,User);_this=_possibleConstructorReturn(this,_getPrototypeOf(User).call(this,props));_this.componentDidMount=function _callee(){var token,userData,user,banAction;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:token=JSON.parse(localStorage.getItem('token'));if(token)_this.setState({token:token});_context.next=4;return _regeneratorRuntime.awrap(_this.getUsers(token));case 4:userData=_context.sent;user=null;banAction=false;if(userData.length){user=userData.find(function(user){return user._id.toString()===_this.props.match.params.id;});if(user){if(user.status==='banned')banAction=true;user.picture=React.createElement(\"img\",{src:user.picture,style:{height:250,width:250,objectFit:'cover',borderRadius:125},alt:\"profile\"});user.status=React.createElement(_Badge,{status:_this.getBadge(user.status),text:user.status});user.date=new Date(user.date).toLocaleString();user.address=Object.values(user.address).join(', ');user.skillCount=user.skills.length;// user.skills = Object.values(user.skills).join(', ');\nuser.wages=user.wages?user.wages+' VND/hour':'not assigned';}_this.setState({user:user,banAction:banAction});}case 8:case\"end\":return _context.stop();}}});};_this.getBadge=function(status){return status==='active'?'success':status==='inactive'?'default':status==='banned'?'error':'primary';};_this.getUsers=function _callee2(token){var requestOptions,response,userData;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:requestOptions={method:'GET',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(token)}};_context2.prev=1;_context2.next=4;return _regeneratorRuntime.awrap(fetch('https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/users',requestOptions));case 4:response=_context2.sent;_context2.next=7;return _regeneratorRuntime.awrap(_this.handleResponse(response));case 7:userData=_context2.sent;_this.setState({loading:false,userData:userData});return _context2.abrupt(\"return\",userData);case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](1);return _context2.abrupt(\"return\",_context2.t0);case 15:case\"end\":return _context2.stop();}}},null,null,[[1,12]]);};_this.banUserAction=function _callee3(){var requestOptions,response,data,user,date;return _regeneratorRuntime.async(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_this.setState({loading:true});requestOptions={method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(_this.state.token)}};_context3.prev=2;_context3.next=5;return _regeneratorRuntime.awrap(fetch(\"https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/ban-user/\".concat(_this.state.user._id),requestOptions));case 5:response=_context3.sent;_context3.next=8;return _regeneratorRuntime.awrap(_this.handleResponse(response));case 8:data=_context3.sent;user=_this.state.user;date=new Date(user.date);user.date=date.toLocaleString();user.status=React.createElement(_Badge,{status:_this.getBadge(data),text:data});_this.setState({loading:false,user:user,banAction:!_this.state.banAction});_context3.next=19;break;case 16:_context3.prev=16;_context3.t0=_context3[\"catch\"](2);console.log(_context3.t0);case 19:case\"end\":return _context3.stop();}}},null,null,[[2,16]]);};_this.state=_defineProperty({token:null,loading:true,banAction:false,userData:[],user:null},\"token\",null);return _this;}_createClass(User,[{key:\"handleResponse\",value:function handleResponse(response){return response.text().then(function(text){var data=text&&JSON.parse(text);if(!response.ok){if(response.status===401){}// auto logout if 401 response returned from api\n// logoutUser();\n// const error = (data && data.message) || response.statusText;\n// return Promise.reject(error);\nreturn data;}return data;});}},{key:\"render\",value:function render(){var _this2=this;var colors=['magenta','cyan','green','volcano','orange','purple','lime','red','blue','gold','geekblue'];var user=this.state.user;var skills=[];if(user){var count=-1;user.skills.map(function(item){var color=colors[++count%colors.length];var skillTag=React.createElement(_Tag,{color:color},item);skills.push(skillTag);});}if(!user){user={id:'Not found'};}var details=[['Name',user.name],['Email',user.email],['Address',user.address],['Role',user.role],['Skills',user.skills],['Date registered',user.date],['Wages',user.wages],['Status',user.status],['Introduction',user.introduction]];return React.createElement(\"div\",{className:\"animated fadeIn\"},React.createElement(LoadingOverlay,{active:this.state.loading,spinner:true,text:\"Loading...\",styles:{overlay:function overlay(base){return _objectSpread({},base,{background:'rgba(255, 255, 255, 0.5)',color:'black'});},spinner:function spinner(base){return _objectSpread({},base,{width:'100px','& svg circle':{stroke:'rgba(255, 0, 0, 0.5)'}});}}},React.createElement(Row,{className:\"justify-content-center\"},React.createElement(Col,{lg:12},React.createElement(Card,null,React.createElement(CardHeader,{className:\"bg-dark\"},React.createElement(\"strong\",null,React.createElement(\"i\",{className:\"icon-info pr-1\"}),\"User ID:\",' ',this.props.match.params.id)),React.createElement(CardBody,null,React.createElement(Row,null,React.createElement(Col,{lg:3,className:\" mt-4\"},React.createElement(Row,{className:\"justify-content-center font-weight-bold mb-3\"},React.createElement(\"h2\",{className:\"text-uppercase name-font\"},user.name)),React.createElement(Row,{className:\"justify-content-center\"},user.picture)),React.createElement(Col,{className:\"ml-4 mt-4\",lg:8},React.createElement(_Descriptions,{title:\"User Information\",bordered:true,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},React.createElement(_Descriptions.Item,{label:\"Role\"},user.role),React.createElement(_Descriptions.Item,{label:\"Status\"},user.status),React.createElement(_Descriptions.Item,{label:\"Registered\"},user.date),React.createElement(_Descriptions.Item,{label:\"Rating\"},user.rate),React.createElement(_Descriptions.Item,{label:\"Skills\"},user.skillCount),React.createElement(_Descriptions.Item,{label:\"Wages\"},user.wages),React.createElement(_Descriptions.Item,{label:\"Info\"},React.createElement(\"strong\",null,\"Email: \"),React.createElement(\"br\",null),\" \",React.createElement(\"span\",{className:\"ml-4 mb-2\"},user.email),React.createElement(\"br\",null),React.createElement(\"strong\",null,\"Address: \"),React.createElement(\"br\",null),' ',React.createElement(\"span\",{className:\"ml-4 mb-2\"},user.address),React.createElement(\"br\",null),\" \",React.createElement(\"strong\",null,\"Skills: \"),React.createElement(\"br\",null),\" \",React.createElement(\"span\",{className:\"ml-4 mb-2\"},skills),React.createElement(\"br\",null),React.createElement(\"strong\",null,\"Introduction: \"),React.createElement(\"br\",null),React.createElement(\"span\",{className:\"ml-4 mb-2\"},user.introduction))),React.createElement(Row,{className:\"justify-content-end mt-4 mr-2\"},React.createElement(_Button,{onClick:function onClick(){return _this2.banUserAction();},type:this.state.banAction?'primary':'danger'},this.state.banAction?'Unban':'Ban'))))))))));}}]);return User;}(Component);export default User;","map":{"version":3,"sources":["/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Users/User.js"],"names":["React","Component","useReducer","Card","CardBody","CardHeader","Col","Row","Table","LoadingOverlay","User","props","componentDidMount","token","JSON","parse","localStorage","getItem","setState","getUsers","userData","user","banAction","length","find","_id","toString","match","params","id","status","picture","height","width","objectFit","borderRadius","getBadge","date","Date","toLocaleString","address","Object","values","join","skillCount","skills","wages","requestOptions","method","headers","Authorization","fetch","response","handleResponse","loading","banUserAction","state","data","console","log","text","then","ok","colors","count","map","item","color","skillTag","push","details","name","email","role","introduction","overlay","base","background","spinner","stroke","xxl","xl","lg","md","sm","xs","rate"],"mappings":"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","sourcesContent":["import React, { Component, useReducer } from 'react';\nimport { Card, CardBody, CardHeader, Col, Row, Table } from 'reactstrap';\nimport { Badge, Button, Descriptions, Tag } from 'antd';\nimport LoadingOverlay from 'react-loading-overlay';\n\nclass User extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: null,\n      loading: true,\n      banAction: false,\n      userData: [],\n      user: null,\n      token: null\n    };\n  }\n\n  componentDidMount = async () => {\n    const token = JSON.parse(localStorage.getItem('token'));\n    if (token) this.setState({ token });\n    const userData = await this.getUsers(token);\n    let user = null;\n    let banAction = false;\n    if (userData.length) {\n      user = userData.find(\n        user => user._id.toString() === this.props.match.params.id\n      );\n\n      if (user) {\n        if (user.status === 'banned') banAction = true;\n        user.picture = (\n          <img\n            src={user.picture}\n            style={{\n              height: 250,\n              width: 250,\n              objectFit: 'cover',\n              borderRadius: 125\n            }}\n            alt=\"profile\"\n          />\n        );\n        user.status = (\n          <Badge status={this.getBadge(user.status)} text={user.status}></Badge>\n        );\n        user.date = new Date(user.date).toLocaleString();\n        user.address = Object.values(user.address).join(', ');\n        user.skillCount = user.skills.length;\n        // user.skills = Object.values(user.skills).join(', ');\n        user.wages = user.wages ? user.wages + ' VND/hour' : 'not assigned';\n      }\n\n      this.setState({ user: user, banAction });\n    }\n  };\n\n  getBadge = status => {\n    return status === 'active'\n      ? 'success'\n      : status === 'inactive'\n      ? 'default'\n      : status === 'banned'\n      ? 'error'\n      : 'primary';\n  };\n\n  getUsers = async token => {\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        'https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/users',\n        requestOptions\n      );\n\n      let userData = await this.handleResponse(response);\n\n      this.setState({ loading: false, userData: userData });\n\n      return userData;\n    } catch (err) {\n      return err;\n    }\n  };\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n      if (!response.ok) {\n        if (response.status === 401) {\n          // auto logout if 401 response returned from api\n          // logoutUser();\n        }\n\n        // const error = (data && data.message) || response.statusText;\n        // return Promise.reject(error);\n        return data;\n      }\n      return data;\n    });\n  }\n\n  banUserAction = async () => {\n    this.setState({ loading: true });\n    const requestOptions = {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.state.token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        `https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/ban-user/${this.state.user._id}`,\n        requestOptions\n      );\n\n      const data = await this.handleResponse(response);\n      let user = this.state.user;\n      const date = new Date(user.date);\n      user.date = date.toLocaleString();\n      user.status = <Badge status={this.getBadge(data)} text={data}></Badge>;\n\n      this.setState({ loading: false, user, banAction: !this.state.banAction });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  render() {\n    const colors = [\n      'magenta',\n      'cyan',\n      'green',\n      'volcano',\n      'orange',\n      'purple',\n      'lime',\n      'red',\n      'blue',\n      'gold',\n      'geekblue'\n    ];\n    let user = this.state.user;\n    let skills = [];\n    if (user) {\n      let count = -1;\n      user.skills.map(item => {\n        const color = colors[++count % colors.length];\n        const skillTag = <Tag color={color}>{item}</Tag>;\n        skills.push(skillTag);\n      });\n    }\n    if (!user) {\n      user = { id: 'Not found' };\n    }\n\n    const details = [\n      ['Name', user.name],\n      ['Email', user.email],\n      ['Address', user.address],\n      ['Role', user.role],\n      ['Skills', user.skills],\n      ['Date registered', user.date],\n      ['Wages', user.wages],\n      ['Status', user.status],\n      ['Introduction', user.introduction]\n    ];\n\n    return (\n      <div className=\"animated fadeIn\">\n        <LoadingOverlay\n          active={this.state.loading}\n          spinner\n          text=\"Loading...\"\n          styles={{\n            overlay: base => ({\n              ...base,\n              background: 'rgba(255, 255, 255, 0.5)',\n              color: 'black'\n            }),\n            spinner: base => ({\n              ...base,\n              width: '100px',\n              '& svg circle': {\n                stroke: 'rgba(255, 0, 0, 0.5)'\n              }\n            })\n          }}\n        >\n          <Row className=\"justify-content-center\">\n            <Col lg={12}>\n              <Card>\n                <CardHeader className=\"bg-dark\">\n                  <strong>\n                    <i className=\"icon-info pr-1\"></i>User ID:{' '}\n                    {this.props.match.params.id}\n                  </strong>\n                </CardHeader>\n                <CardBody>\n                  <Row>\n                    <Col lg={3} className=\" mt-4\">\n                      <Row className=\"justify-content-center font-weight-bold mb-3\">\n                        <h2 className=\"text-uppercase name-font\">\n                          {user.name}\n                        </h2>\n                      </Row>\n                      <Row className=\"justify-content-center\">\n                        {user.picture}\n                      </Row>\n                    </Col>\n                    <Col className=\"ml-4 mt-4\" lg={8}>\n                      <Descriptions\n                        title=\"User Information\"\n                        bordered\n                        column={{ xxl: 4, xl: 3, lg: 3, md: 3, sm: 2, xs: 1 }}\n                      >\n                        <Descriptions.Item label=\"Role\">\n                          {user.role}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Status\">\n                          {user.status}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Registered\">\n                          {user.date}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Rating\">\n                          {user.rate}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Skills\">\n                          {user.skillCount}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Wages\">\n                          {user.wages}\n                        </Descriptions.Item>\n                        <Descriptions.Item label=\"Info\">\n                          <strong>Email: </strong>\n                          <br /> <span className=\"ml-4 mb-2\">{user.email}</span>\n                          <br />\n                          <strong>Address: </strong>\n                          <br />{' '}\n                          <span className=\"ml-4 mb-2\">{user.address}</span>\n                          <br /> <strong>Skills: </strong>\n                          <br /> <span className=\"ml-4 mb-2\">{skills}</span>\n                          <br />\n                          <strong>Introduction: </strong>\n                          <br />\n                          <span className=\"ml-4 mb-2\">{user.introduction}</span>\n                        </Descriptions.Item>\n                      </Descriptions>\n                      <Row className=\"justify-content-end mt-4 mr-2\">\n                        <Button\n                          onClick={() => this.banUserAction()}\n                          type={this.state.banAction ? 'primary' : 'danger'}\n                        >\n                          {this.state.banAction ? 'Unban' : 'Ban'}\n                        </Button>\n                      </Row>\n                    </Col>\n                  </Row>\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n        </LoadingOverlay>\n      </div>\n    );\n  }\n}\n\nexport default User;\n"]},"metadata":{},"sourceType":"module"}