{"ast":null,"code":"import\"antd/es/card/style\";import _Card from\"antd/es/card\";import\"antd/es/radio/style\";import _Radio from\"antd/es/radio\";import\"antd/es/row/style\";import _Row from\"antd/es/row\";import\"antd/es/statistic/style\";import _Statistic from\"antd/es/statistic\";import _objectSpread from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Col}from'reactstrap';import LoadingOverlay from'react-loading-overlay';import{Chart,Tooltip,Axis,Point,SmoothLine,Legend,Sector,Coord}from'viser-react';var Dashboard=/*#__PURE__*/function(_Component){_inherits(Dashboard,_Component);function Dashboard(props){var _this;_classCallCheck(this,Dashboard);_this=_possibleConstructorReturn(this,_getPrototypeOf(Dashboard).call(this,props));_this.componentWillMount=function _callee(){var token;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// const token = localStorage.removeItem(\"token\");\ntoken=JSON.parse(localStorage.getItem('token'));if(token){_this.setState({token:token});}else{_this.props.history.push('/login');}case 2:case\"end\":return _context.stop();}}});};_this.getRevenue=function _callee2(){var requestOptions,response,revenue;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_this.setState({loading:true});requestOptions={method:'GET',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(_this.state.token)}};_context2.prev=2;_context2.next=5;return _regeneratorRuntime.awrap(fetch('https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/revenue',requestOptions));case 5:response=_context2.sent;_context2.next=8;return _regeneratorRuntime.awrap(_this.handleResponse(response));case 8:revenue=_context2.sent;_this.setState({loading:false,revenue:revenue});_context2.next=16;break;case 12:_context2.prev=12;_context2.t0=_context2[\"catch\"](2);_this.setState({loading:false});console.log(_context2.t0);case 16:case\"end\":return _context2.stop();}}},null,null,[[2,12]]);};_this.state={token:null,revenue:[],loading:false,rangeFilter:'all'};return _this;}_createClass(Dashboard,[{key:\"componentDidMount\",value:function componentDidMount(){var token=JSON.parse(localStorage.getItem('token'));if(token)this.setState({token:token});this.getRevenue();}},{key:\"handleResponse\",value:function handleResponse(response){return response.text().then(function(text){var data=text&&JSON.parse(text);if(!response.ok){return false;}return data;});}},{key:\"onChangeFilter\",value:function onChangeFilter(e){this.setState({rangeFilter:e.target.value});}},{key:\"render\",value:function render(){var _this2=this;var data=[];var sum=0;var skills=[{skill:'ReactJS',revenue:41.8},{skill:'Angular',revenue:38},{skill:'React Native',revenue:33.7},{skill:'VueJS',revenue:30.7},{skill:'C#',revenue:25.8},{skill:'.NET',revenue:31.7},{skill:'Unity',revenue:33},{skill:'English',revenue:46},{skill:'Guitar',revenue:38.3}];if(this.state.revenue.length){var revenue=this.state.revenue;revenue.forEach(function(item,index){data.push({contract:(index+1).toString(),value:item.price});sum=sum+item.price;});}var scale=[{dataKey:'value'},{dataKey:'contract'}];return React.createElement(\"div\",{className:\"animated fadeIn mt-4\"},React.createElement(LoadingOverlay,{active:this.state.loading,spinner:true,text:\"Loading...\",styles:{overlay:function overlay(base){return _objectSpread({},base,{background:'rgba(255, 255, 255, 0.5)',color:'black'});},spinner:function spinner(base){return _objectSpread({},base,{width:'100px','& svg circle':{stroke:'rgba(255, 0, 0, 0.5)'}});}}},React.createElement(_Card,{title:\"Dashboard\",bordered:false},React.createElement(_Row,{type:\"flex\",justify:\"center\",className:\"mt-4\"},React.createElement(Col,{xl:5},React.createElement(\"h3\",null,\"Statistic\"),React.createElement(_Row,null,React.createElement(_Row,{type:\"flex\",justify:\"start\"},React.createElement(_Statistic,{title:\"Revenue (VND)\",value:sum,precision:0}),React.createElement(_Statistic,{title:\"Contracts\",value:data.length,precision:0,className:\"ml-4\"})),React.createElement(\"h6\",{className:\"mt-4\",style:{color:'grey'}},\"Top Revenue per Skill\"),React.createElement(Chart,{forceFit:true,height:350,data:skills},React.createElement(Tooltip,null),React.createElement(Legend,{position:\"bottom\",dataKey:\"skill\",offsetX:0}),React.createElement(Coord,{type:\"polar\"}),React.createElement(Sector,{position:\"skill*revenue\",color:\"skill\",style:{stroke:'#fff',lineWidth:1}})))),React.createElement(Col,{xl:6},React.createElement(_Radio.Group,{className:\"d-flex justify-content-end mb-2\",defaultValue:\"a\",size:\"small\",buttonStyle:\"solid\",onChange:function onChange(e){return _this2.onChangeFilter(e);},value:this.state.rangeFilter},React.createElement(_Radio.Button,{value:\"all\"},\"All\"),React.createElement(_Radio.Button,{value:\"week\"},\"Week\"),React.createElement(_Radio.Button,{value:\"month\"},\"Month\")),React.createElement(_Card,{title:\"Revenue\",bordered:true},React.createElement(Chart,{forceFit:true,height:400,data:data,scale:scale},React.createElement(Tooltip,null),React.createElement(Axis,null),React.createElement(SmoothLine,{color:\"#00d77d\",position:\"contract*value\"}),React.createElement(Point,{color:\"#00d77d\",position:\"contract*value\",shape:\"circle\"}))))))));}}]);return Dashboard;}(Component);export default Dashboard;","map":{"version":3,"sources":["/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Dashboard/Dashboard.js"],"names":["React","Component","Col","LoadingOverlay","Chart","Tooltip","Axis","Point","SmoothLine","Legend","Sector","Coord","Dashboard","props","componentWillMount","token","JSON","parse","localStorage","getItem","setState","history","push","getRevenue","loading","requestOptions","method","headers","Authorization","state","fetch","response","handleResponse","revenue","console","log","rangeFilter","text","then","data","ok","e","target","value","sum","skills","skill","length","forEach","item","index","contract","toString","price","scale","dataKey","overlay","base","background","color","spinner","width","stroke","lineWidth","onChangeFilter"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport { Col } from 'reactstrap';\nimport LoadingOverlay from 'react-loading-overlay';\nimport { Card, Row, Typography, Radio, Statistic, Select } from 'antd';\nimport {\n  Chart,\n  Tooltip,\n  Axis,\n  Point,\n  SmoothLine,\n  Legend,\n  Sector,\n  Coord\n} from 'viser-react';\nclass Dashboard extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: null,\n      revenue: [],\n      loading: false,\n      rangeFilter: 'all'\n    };\n  }\n\n  componentWillMount = async () => {\n    // const token = localStorage.removeItem(\"token\");\n    const token = JSON.parse(localStorage.getItem('token'));\n\n    if (token) {\n      this.setState({ token });\n    } else {\n      this.props.history.push('/login');\n    }\n  };\n\n  componentDidMount() {\n    const token = JSON.parse(localStorage.getItem('token'));\n    if (token) this.setState({ token });\n    this.getRevenue();\n  }\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n      if (!response.ok) {\n        return false;\n      }\n      return data;\n    });\n  }\n\n  getRevenue = async () => {\n    this.setState({ loading: true });\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.state.token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        'https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/revenue',\n        requestOptions\n      );\n\n      let revenue = await this.handleResponse(response);\n      this.setState({ loading: false, revenue: revenue });\n    } catch (err) {\n      this.setState({ loading: false });\n      console.log(err);\n    }\n  };\n\n  onChangeFilter(e) {\n    this.setState({ rangeFilter: e.target.value });\n  }\n\n  render() {\n    let data = [];\n    let sum = 0;\n    const skills = [\n      { skill: 'ReactJS', revenue: 41.8 },\n      { skill: 'Angular', revenue: 38 },\n      { skill: 'React Native', revenue: 33.7 },\n      { skill: 'VueJS', revenue: 30.7 },\n      { skill: 'C#', revenue: 25.8 },\n      { skill: '.NET', revenue: 31.7 },\n      { skill: 'Unity', revenue: 33 },\n      { skill: 'English', revenue: 46 },\n      { skill: 'Guitar', revenue: 38.3 }\n    ];\n    if (this.state.revenue.length) {\n      const revenue = this.state.revenue;\n      revenue.forEach((item, index) => {\n        data.push({ contract: (index + 1).toString(), value: item.price });\n        sum = sum + item.price;\n      });\n    }\n\n    const scale = [\n      {\n        dataKey: 'value'\n      },\n      {\n        dataKey: 'contract'\n      }\n    ];\n\n    return (\n      <div className=\"animated fadeIn mt-4\">\n        <LoadingOverlay\n          active={this.state.loading}\n          spinner\n          text=\"Loading...\"\n          styles={{\n            overlay: base => ({\n              ...base,\n              background: 'rgba(255, 255, 255, 0.5)',\n              color: 'black'\n            }),\n            spinner: base => ({\n              ...base,\n              width: '100px',\n              '& svg circle': {\n                stroke: 'rgba(255, 0, 0, 0.5)'\n              }\n            })\n          }}\n        >\n          <Card title=\"Dashboard\" bordered={false}>\n            <Row type=\"flex\" justify=\"center\" className=\"mt-4\">\n              <Col xl={5}>\n                <h3>Statistic</h3>\n                <Row>\n                  <Row type=\"flex\" justify=\"start\">\n                    <Statistic\n                      title=\"Revenue (VND)\"\n                      value={sum}\n                      precision={0}\n                    />\n                    <Statistic\n                      title=\"Contracts\"\n                      value={data.length}\n                      precision={0}\n                      className=\"ml-4\"\n                    />\n                  </Row>\n                  <h6 className=\"mt-4\" style={{ color: 'grey' }}>\n                    Top Revenue per Skill\n                  </h6>\n                  <Chart forceFit height={350} data={skills}>\n                    <Tooltip />\n                    <Legend position=\"bottom\" dataKey=\"skill\" offsetX={0} />\n                    <Coord type=\"polar\" />\n                    <Sector\n                      position=\"skill*revenue\"\n                      color=\"skill\"\n                      style={{ stroke: '#fff', lineWidth: 1 }}\n                    />\n                  </Chart>\n                </Row>\n              </Col>\n              <Col xl={6}>\n                <Radio.Group\n                  className=\"d-flex justify-content-end mb-2\"\n                  defaultValue=\"a\"\n                  size=\"small\"\n                  buttonStyle=\"solid\"\n                  onChange={e => this.onChangeFilter(e)}\n                  value={this.state.rangeFilter}\n                >\n                  <Radio.Button value=\"all\">All</Radio.Button>\n                  <Radio.Button value=\"week\">Week</Radio.Button>\n                  <Radio.Button value=\"month\">Month</Radio.Button>\n                </Radio.Group>\n                <Card title=\"Revenue\" bordered={true}>\n                  <Chart forceFit height={400} data={data} scale={scale}>\n                    <Tooltip />\n                    <Axis />\n                    <SmoothLine color=\"#00d77d\" position=\"contract*value\" />\n                    <Point\n                      color=\"#00d77d\"\n                      position=\"contract*value\"\n                      shape=\"circle\"\n                    />\n                  </Chart>\n                </Card>\n              </Col>\n            </Row>\n          </Card>\n        </LoadingOverlay>\n      </div>\n    );\n  }\n}\n\nexport default Dashboard;\n"]},"metadata":{},"sourceType":"module"}