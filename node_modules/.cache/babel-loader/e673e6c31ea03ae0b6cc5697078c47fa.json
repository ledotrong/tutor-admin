{"ast":null,"code":"import _objectSpread from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _defineProperty from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _classCallCheck from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/trongledo/Documents/GitHub/tutor-admin/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import LoadingOverlay from'react-loading-overlay';import{MDBDataTable}from'mdbreact';import{Card,CardBody,CardHeader,Col,Row,Button,Modal,ModalBody,ModalFooter,ModalHeader,Input,Form}from'reactstrap';var Skills=/*#__PURE__*/function(_Component){_inherits(Skills,_Component);function Skills(props){var _this$state;var _this;_classCallCheck(this,Skills);_this=_possibleConstructorReturn(this,_getPrototypeOf(Skills).call(this,props));_this.componentWillMount=function _callee(){var token;return _regeneratorRuntime.async(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:// const token = localStorage.removeItem(\"token\");\ntoken=JSON.parse(localStorage.getItem('token'));if(token){_this.setState({token:token});}else{_this.props.history.push('/login');}case 2:case\"end\":return _context.stop();}}});};_this.getSkills=function _callee2(){var requestOptions,response,skills;return _regeneratorRuntime.async(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:requestOptions={method:'GET',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(_this.state.token)}};_context2.prev=1;_context2.next=4;return _regeneratorRuntime.awrap(fetch('https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skills',requestOptions));case 4:response=_context2.sent;_context2.next=7;return _regeneratorRuntime.awrap(_this.handleResponse(response));case 7:skills=_context2.sent;skills=skills.filter(function(data){return data.isDeleted!==true;});_this.setFormat(skills);_this.setState({loading:false,skills:skills});_context2.next=16;break;case 13:_context2.prev=13;_context2.t0=_context2[\"catch\"](1);console.log(_context2.t0);case 16:case\"end\":return _context2.stop();}}},null,null,[[1,13]]);};_this.state=(_this$state={token:null,deleteModal:false,editModal:false,addModal:false,name:'',link:'',key:'',skills:[],loading:true,currentItem:null},_defineProperty(_this$state,\"token\",null),_defineProperty(_this$state,\"alert\",null),_this$state);_this.toggleDelete=_this.toggleDelete.bind(_assertThisInitialized(_this));_this.toggleEdit=_this.toggleEdit.bind(_assertThisInitialized(_this));_this.toggleAdd=_this.toggleAdd.bind(_assertThisInitialized(_this));_this.onChangeHandler=_this.onChangeHandler.bind(_assertThisInitialized(_this));_this.onCreate=_this.onCreate.bind(_assertThisInitialized(_this));_this.onEdit=_this.onEdit.bind(_assertThisInitialized(_this));_this.onDelete=_this.onDelete.bind(_assertThisInitialized(_this));return _this;}_createClass(Skills,[{key:\"componentDidMount\",value:function componentDidMount(){var token=JSON.parse(localStorage.getItem('token'));if(token)this.setState({token:token});this.getSkills();}},{key:\"setFormat\",value:function setFormat(skills){var _this2=this;skills.forEach(function(element,index){element.id=index+1;element.isDeleted=undefined;element.actions=React.createElement(\"div\",{className:\"float-right\"},React.createElement(Button,{className:\"mr-2\",onClick:function onClick(){return _this2.toggleEditItem(element);},type:\"primary\",icon:\"edit\",style:{backgroundColor:'#00C5D7',borderColor:'#00C5D7',color:'white'}},\"Edit\"),React.createElement(Button,{icon:\"delete\",onClick:function onClick(){return _this2.toggleDeleteItem(element);},type:\"danger\",style:{backgroundColor:'#d71200',borderColor:'#d71200',color:'white'}},\"Delete\"));});}},{key:\"handleResponse\",value:function handleResponse(response){return response.text().then(function(text){var data=text&&JSON.parse(text);if(!response.ok){return false;}return data;});}},{key:\"onChangeHandler\",value:function onChangeHandler(e){this.setState(_defineProperty({},e.target.name,e.target.value));}},{key:\"toggleDelete\",value:function toggleDelete(){this.setState({deleteModal:!this.state.deleteModal});}},{key:\"toggleDeleteItem\",value:function toggleDeleteItem(item){this.toggleDelete();this.setState({currentItem:item});}},{key:\"toggleEdit\",value:function toggleEdit(){this.setState({editModal:!this.state.editModal});}},{key:\"toggleEditItem\",value:function toggleEditItem(item){this.toggleEdit();this.setState({currentItem:item});}},{key:\"toggleAdd\",value:function toggleAdd(){this.setState({addModal:!this.state.addModal,alert:null});}},{key:\"onCreate\",value:function onCreate(e){var requestOptions,response,skills;return _regeneratorRuntime.async(function onCreate$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:e.preventDefault();this.setState({loading:true});requestOptions={method:'POST',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(this.state.token)},body:JSON.stringify({name:this.state.name})};_context3.prev=3;_context3.next=6;return _regeneratorRuntime.awrap(fetch('https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skill',requestOptions));case 6:response=_context3.sent;_context3.next=9;return _regeneratorRuntime.awrap(this.handleResponse(response));case 9:skills=_context3.sent;if(skills){this.getSkills();this.setState({addModal:false,alert:null});}_context3.next=16;break;case 13:_context3.prev=13;_context3.t0=_context3[\"catch\"](3);console.log(_context3.t0);case 16:case\"end\":return _context3.stop();}}},null,this,[[3,13]]);}},{key:\"onEdit\",value:function onEdit(e){var requestOptions,response,skills;return _regeneratorRuntime.async(function onEdit$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:e.preventDefault();this.setState({loading:true});console.log('Update');requestOptions={method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(this.state.token)},body:JSON.stringify({name:this.state.name,key:this.state.currentItem._id})};_context4.prev=4;_context4.next=7;return _regeneratorRuntime.awrap(fetch('https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skill/update',requestOptions));case 7:response=_context4.sent;_context4.next=10;return _regeneratorRuntime.awrap(this.handleResponse(response));case 10:skills=_context4.sent;if(skills){this.getSkills();this.setState({editModal:false,alert:null});}_context4.next=17;break;case 14:_context4.prev=14;_context4.t0=_context4[\"catch\"](4);console.log(_context4.t0);case 17:case\"end\":return _context4.stop();}}},null,this,[[4,14]]);}},{key:\"onDelete\",value:function onDelete(e){var requestOptions,response,skills;return _regeneratorRuntime.async(function onDelete$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:e.preventDefault();this.setState({loading:true});requestOptions={method:'PATCH',headers:{'Content-Type':'application/json',Authorization:\"Bearer \".concat(this.state.token)},body:JSON.stringify({key:this.state.currentItem._id})};_context5.prev=3;_context5.next=6;return _regeneratorRuntime.awrap(fetch('https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skill/delete',requestOptions));case 6:response=_context5.sent;_context5.next=9;return _regeneratorRuntime.awrap(this.handleResponse(response));case 9:skills=_context5.sent;if(skills){this.getSkills();this.setState({deleteModal:false,alert:null});}_context5.next=16;break;case 13:_context5.prev=13;_context5.t0=_context5[\"catch\"](3);console.log(_context5.t0);case 16:case\"end\":return _context5.stop();}}},null,this,[[3,13]]);}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"animated fadeIn\"},React.createElement(LoadingOverlay,{active:this.state.loading,spinner:true,text:\"Loading...\",styles:{overlay:function overlay(base){return _objectSpread({},base,{background:'rgba(255, 255, 255, 0.5)',color:'black'});},spinner:function spinner(base){return _objectSpread({},base,{width:'100px','& svg circle':{stroke:'rgba(255, 0, 0, 0.5)'}});}}},React.createElement(Row,{className:\"justify-content-center\"},React.createElement(Col,{xs:\"6\",lg:\"8\"},React.createElement(Card,null,React.createElement(CardHeader,{className:\"bg-dark\"},React.createElement(\"i\",{className:\"fa fa-align-justify\"}),\"Skills\"),React.createElement(CardBody,null,React.createElement(Button,{onClick:this.toggleAdd,type:\"primary\",className:\"mb-3 float-right\",icon:\"plus-circle\",style:{backgroundColor:'#00d77d',borderColor:'#00d77d',color:'white'}},\"Add\"),React.createElement(MDBDataTable,{responsive:true,hover:true,bordered:true,data:{columns:[{label:'ID',field:'id',sort:'asc',width:50},{label:'Name',field:'name',sort:'asc',width:150},{label:'Actions',field:'actions',sort:'asc',width:100}],rows:this.state.skills}}))))),React.createElement(Modal,{isOpen:this.state.addModal,toggleDelete:this.toggleAdd,className:'modal-success '},React.createElement(ModalHeader,null,\"Add\"),React.createElement(ModalBody,null,React.createElement(Form,{onSubmit:this.onCreate},React.createElement(Input,{type:\"text\",id:\"text-input\",name:\"name\",placeholder:\"Name\",required:true,className:\"mb-2\",onChange:this.onChangeHandler}),this.state.alert,React.createElement(Button,{className:\"float-right\",color:\"success\",type:\"submit\",onSubmit:this.onCreate},\"Add\"))),React.createElement(ModalFooter,null,React.createElement(Button,{color:\"secondary\",onClick:this.toggleAdd},\"Cancel\"))),React.createElement(Modal,{isOpen:this.state.editModal,toggleDelete:this.toggleEdit,className:'modal-info '},React.createElement(ModalHeader,null,\"Edit\"),React.createElement(ModalBody,null,React.createElement(Form,{onSubmit:this.onEdit},React.createElement(Input,{type:\"text\",id:\"edit-name\",name:\"key\",placeholder:\"key\",required:true,disabled:true,value:this.state.currentItem?this.state.currentItem._id:'',className:\"mb-2\",onChange:this.onChangeHandler}),React.createElement(Input,{type:\"text\",id:\"edit-link\",name:\"name\",placeholder:\"Name\",required:true,className:\"mb-2\",onChange:this.onChangeHandler}),React.createElement(Button,{className:\"float-right\",color:\"info\",type:\"submit\",onSubmit:this.onEdit},\"Update\"))),React.createElement(ModalFooter,null,React.createElement(Button,{color:\"secondary\",onClick:this.toggleEdit},\"Cancel\"))),React.createElement(Modal,{isOpen:this.state.deleteModal,toggleDelete:this.toggleDelete,className:'modal-danger '},React.createElement(ModalHeader,null,\"Delete\"),React.createElement(ModalBody,null,\"This skill will be marked as 'deleted'. Do you want to continue?\"),React.createElement(ModalFooter,null,React.createElement(Button,{color:\"danger\",onClick:this.onDelete},\"Confirm\"),' ',React.createElement(Button,{color:\"secondary\",onClick:this.toggleDelete},\"Cancel\")))));}}]);return Skills;}(Component);export default Skills;","map":{"version":3,"sources":["/Users/trongledo/Documents/GitHub/tutor-admin/src/views/Skills/Skills.js"],"names":["React","Component","LoadingOverlay","MDBDataTable","Card","CardBody","CardHeader","Col","Row","Button","Modal","ModalBody","ModalFooter","ModalHeader","Input","Form","Skills","props","componentWillMount","token","JSON","parse","localStorage","getItem","setState","history","push","getSkills","requestOptions","method","headers","Authorization","state","fetch","response","handleResponse","skills","filter","data","isDeleted","setFormat","loading","console","log","deleteModal","editModal","addModal","name","link","key","currentItem","toggleDelete","bind","toggleEdit","toggleAdd","onChangeHandler","onCreate","onEdit","onDelete","forEach","element","index","id","undefined","actions","toggleEditItem","backgroundColor","borderColor","color","toggleDeleteItem","text","then","ok","e","target","value","item","alert","preventDefault","body","stringify","_id","overlay","base","background","spinner","width","stroke","columns","label","field","sort","rows"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport LoadingOverlay from 'react-loading-overlay';\nimport { MDBDataTable } from 'mdbreact';\nimport {\n  Card,\n  CardBody,\n  CardHeader,\n  Col,\n  Row,\n  Button,\n  Modal,\n  ModalBody,\n  ModalFooter,\n  ModalHeader,\n  Input,\n  Form\n} from 'reactstrap';\n\nclass Skills extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      token: null,\n      deleteModal: false,\n      editModal: false,\n      addModal: false,\n      name: '',\n      link: '',\n      key: '',\n      skills: [],\n      loading: true,\n      currentItem: null,\n      token: null,\n      alert: null\n    };\n\n    this.toggleDelete = this.toggleDelete.bind(this);\n    this.toggleEdit = this.toggleEdit.bind(this);\n    this.toggleAdd = this.toggleAdd.bind(this);\n    this.onChangeHandler = this.onChangeHandler.bind(this);\n    this.onCreate = this.onCreate.bind(this);\n    this.onEdit = this.onEdit.bind(this);\n    this.onDelete = this.onDelete.bind(this);\n  }\n\n  componentWillMount = async () => {\n    // const token = localStorage.removeItem(\"token\");\n    const token = JSON.parse(localStorage.getItem('token'));\n\n    if (token) {\n      this.setState({ token });\n    } else {\n      this.props.history.push('/login');\n    }\n  };\n\n  componentDidMount() {\n    const token = JSON.parse(localStorage.getItem('token'));\n    if (token) this.setState({ token });\n    this.getSkills();\n  }\n\n  setFormat(skills) {\n    skills.forEach((element, index) => {\n      element.id = index + 1;\n      element.isDeleted = undefined;\n      element.actions = (\n        <div className=\"float-right\">\n          <Button\n            className=\"mr-2\"\n            onClick={() => this.toggleEditItem(element)}\n            type=\"primary\"\n            icon=\"edit\"\n            style={{\n              backgroundColor: '#00C5D7',\n              borderColor: '#00C5D7',\n              color: 'white'\n            }}\n          >\n            Edit\n          </Button>\n          <Button\n            icon=\"delete\"\n            onClick={() => this.toggleDeleteItem(element)}\n            type=\"danger\"\n            style={{\n              backgroundColor: '#d71200',\n              borderColor: '#d71200',\n              color: 'white'\n            }}\n          >\n            Delete\n          </Button>\n        </div>\n      );\n    });\n  }\n\n  getSkills = async () => {\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.state.token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        'https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skills',\n        requestOptions\n      );\n\n      let skills = await this.handleResponse(response);\n      skills = skills.filter(data => data.isDeleted !== true);\n\n      this.setFormat(skills);\n\n      this.setState({ loading: false, skills: skills });\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n      if (!response.ok) {\n        return false;\n      }\n      return data;\n    });\n  }\n\n  onChangeHandler(e) {\n    this.setState({ [e.target.name]: e.target.value });\n  }\n\n  toggleDelete() {\n    this.setState({\n      deleteModal: !this.state.deleteModal\n    });\n  }\n\n  toggleDeleteItem(item) {\n    this.toggleDelete();\n    this.setState({ currentItem: item });\n  }\n\n  toggleEdit() {\n    this.setState({\n      editModal: !this.state.editModal\n    });\n  }\n\n  toggleEditItem(item) {\n    this.toggleEdit();\n    this.setState({ currentItem: item });\n  }\n\n  toggleAdd() {\n    this.setState({\n      addModal: !this.state.addModal,\n      alert: null\n    });\n  }\n\n  async onCreate(e) {\n    e.preventDefault();\n    this.setState({ loading: true });\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.state.token}`\n      },\n      body: JSON.stringify({ name: this.state.name })\n    };\n    try {\n      const response = await fetch(\n        'https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skill',\n        requestOptions\n      );\n\n      let skills = await this.handleResponse(response);\n\n      if (skills) {\n        this.getSkills();\n        this.setState({\n          addModal: false,\n          alert: null\n        });\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async onEdit(e) {\n    e.preventDefault();\n    this.setState({ loading: true });\n    console.log('Update');\n    const requestOptions = {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.state.token}`\n      },\n      body: JSON.stringify({\n        name: this.state.name,\n        key: this.state.currentItem._id\n      })\n    };\n    try {\n      const response = await fetch(\n        'https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skill/update',\n        requestOptions\n      );\n\n      let skills = await this.handleResponse(response);\n      if (skills) {\n        this.getSkills();\n        this.setState({\n          editModal: false,\n          alert: null\n        });\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  async onDelete(e) {\n    e.preventDefault();\n    this.setState({ loading: true });\n    const requestOptions = {\n      method: 'PATCH',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.state.token}`\n      },\n      body: JSON.stringify({\n        key: this.state.currentItem._id\n      })\n    };\n    try {\n      const response = await fetch(\n        'https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skill/delete',\n        requestOptions\n      );\n\n      let skills = await this.handleResponse(response);\n      if (skills) {\n        this.getSkills();\n        this.setState({\n          deleteModal: false,\n          alert: null\n        });\n      }\n    } catch (err) {\n      console.log(err);\n    }\n  }\n\n  render() {\n    return (\n      <div className=\"animated fadeIn\">\n        <LoadingOverlay\n          active={this.state.loading}\n          spinner\n          text=\"Loading...\"\n          styles={{\n            overlay: base => ({\n              ...base,\n              background: 'rgba(255, 255, 255, 0.5)',\n              color: 'black'\n            }),\n            spinner: base => ({\n              ...base,\n              width: '100px',\n              '& svg circle': {\n                stroke: 'rgba(255, 0, 0, 0.5)'\n              }\n            })\n          }}\n        >\n          <Row className=\"justify-content-center\">\n            <Col xs=\"6\" lg=\"8\">\n              <Card>\n                <CardHeader className=\"bg-dark\">\n                  <i className=\"fa fa-align-justify\"></i>Skills\n                </CardHeader>\n\n                <CardBody>\n                  <Button\n                    onClick={this.toggleAdd}\n                    type=\"primary\"\n                    className=\"mb-3 float-right\"\n                    icon=\"plus-circle\"\n                    style={{\n                      backgroundColor: '#00d77d',\n                      borderColor: '#00d77d',\n                      color: 'white'\n                    }}\n                  >\n                    Add\n                  </Button>\n\n                  <MDBDataTable\n                    responsive\n                    hover\n                    bordered\n                    data={{\n                      columns: [\n                        {\n                          label: 'ID',\n                          field: 'id',\n                          sort: 'asc',\n                          width: 50\n                        },\n                        {\n                          label: 'Name',\n                          field: 'name',\n                          sort: 'asc',\n                          width: 150\n                        },\n                        {\n                          label: 'Actions',\n                          field: 'actions',\n                          sort: 'asc',\n                          width: 100\n                        }\n                      ],\n                      rows: this.state.skills\n                    }}\n                  />\n                </CardBody>\n              </Card>\n            </Col>\n          </Row>\n          <Modal\n            isOpen={this.state.addModal}\n            toggleDelete={this.toggleAdd}\n            className={'modal-success '}\n          >\n            <ModalHeader>Add</ModalHeader>\n            <ModalBody>\n              <Form onSubmit={this.onCreate}>\n                <Input\n                  type=\"text\"\n                  id=\"text-input\"\n                  name=\"name\"\n                  placeholder=\"Name\"\n                  required\n                  className=\"mb-2\"\n                  onChange={this.onChangeHandler}\n                />\n                {this.state.alert}\n                <Button\n                  className=\"float-right\"\n                  color=\"success\"\n                  type=\"submit\"\n                  onSubmit={this.onCreate}\n                >\n                  Add\n                </Button>\n              </Form>\n            </ModalBody>\n            <ModalFooter>\n              <Button color=\"secondary\" onClick={this.toggleAdd}>\n                Cancel\n              </Button>\n            </ModalFooter>\n          </Modal>\n          <Modal\n            isOpen={this.state.editModal}\n            toggleDelete={this.toggleEdit}\n            className={'modal-info '}\n          >\n            <ModalHeader>Edit</ModalHeader>\n            <ModalBody>\n              <Form onSubmit={this.onEdit}>\n                <Input\n                  type=\"text\"\n                  id=\"edit-name\"\n                  name=\"key\"\n                  placeholder=\"key\"\n                  required\n                  disabled\n                  value={\n                    this.state.currentItem ? this.state.currentItem._id : ''\n                  }\n                  className=\"mb-2\"\n                  onChange={this.onChangeHandler}\n                />\n                <Input\n                  type=\"text\"\n                  id=\"edit-link\"\n                  name=\"name\"\n                  placeholder=\"Name\"\n                  required\n                  className=\"mb-2\"\n                  onChange={this.onChangeHandler}\n                />\n                <Button\n                  className=\"float-right\"\n                  color=\"info\"\n                  type=\"submit\"\n                  onSubmit={this.onEdit}\n                >\n                  Update\n                </Button>\n              </Form>\n            </ModalBody>\n            <ModalFooter>\n              <Button color=\"secondary\" onClick={this.toggleEdit}>\n                Cancel\n              </Button>\n            </ModalFooter>\n          </Modal>\n          <Modal\n            isOpen={this.state.deleteModal}\n            toggleDelete={this.toggleDelete}\n            className={'modal-danger '}\n          >\n            <ModalHeader>Delete</ModalHeader>\n            <ModalBody>\n              This skill will be marked as 'deleted'. Do you want to continue?\n            </ModalBody>\n            <ModalFooter>\n              <Button color=\"danger\" onClick={this.onDelete}>\n                Confirm\n              </Button>{' '}\n              <Button color=\"secondary\" onClick={this.toggleDelete}>\n                Cancel\n              </Button>\n            </ModalFooter>\n          </Modal>\n        </LoadingOverlay>\n      </div>\n    );\n  }\n}\n\nexport default Skills;\n"]},"metadata":{},"sourceType":"module"}