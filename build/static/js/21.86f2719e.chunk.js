(this["webpackJsonptutor-admin"]=this["webpackJsonptutor-admin"]||[]).push([[21],{555:function(e,t,n){"use strict";n.r(t);var a=n(62),r=n.n(a),o=n(12),c=n(13),l=n(15),s=n(14),u=n(16),i=n(0),p=n.n(i),m=n(5),h=n(17),d=n(301),f=n(290),b=p.a.lazy((function(){return Promise.all([n.e(0),n.e(2),n.e(13),n.e(24)]).then(n.bind(null,544))})),g=p.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(11)]).then(n.bind(null,548))})),y=p.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(4),n.e(25)]).then(n.bind(null,549))})),k=p.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(8)]).then(n.bind(null,552))})),x=[{path:"/",exact:!0,name:"Dashboard",component:p.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(9),n.e(22)]).then(n.bind(null,550))}))},{path:"/skills",exact:!0,name:"Skills",component:b},{path:"/users",exact:!0,name:"Users",component:g},{path:"/users/:id",exact:!0,name:"User Details",component:y},{path:"/accounts",exact:!0,name:"Accounts",component:k},{path:"/contracts",exact:!0,name:"Contracts",component:p.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(3),n.e(10)]).then(n.bind(null,551))}))},{path:"/contracts/:id",exact:!0,name:"Contract",component:p.a.lazy((function(){return Promise.all([n.e(0),n.e(1),n.e(3),n.e(4),n.e(16)]).then(n.bind(null,553))}))}],v=p.a.lazy((function(){return n.e(19).then(n.bind(null,536))})),E=p.a.lazy((function(){return Promise.all([n.e(1),n.e(2),n.e(15),n.e(20)]).then(n.bind(null,537))})),z=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(l.a)(this,Object(s.a)(t).call(this,e))).componentWillMount=function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:(e=JSON.parse(localStorage.getItem("token")))?n.setState({token:e}):n.props.history.push("/login");case 2:case"end":return t.stop()}}))},n.componentDidMount=function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.state.token){t.next=7;break}return t.next=3,r.a.awrap(n.getUsers());case 3:e=t.sent,localStorage.setItem("role",e),t.next=8;break;case 7:n.props.history.push("/login");case 8:case"end":return t.stop()}}))},n.getUsers=function(){var e,t,a;return r.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.state.token)}},o.prev=1,o.next=4,r.a.awrap(fetch("https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me",e));case 4:return t=o.sent,o.next=7,r.a.awrap(n.handleResponse(t));case 7:return a=o.sent,o.abrupt("return",a.role);case 11:return o.prev=11,o.t0=o.catch(1),o.abrupt("return",o.t0);case 14:case"end":return o.stop()}}),null,null,[[1,11]])},n.loading=function(){return p.a.createElement("div",{className:"animated fadeIn pt-1 text-center"},"Loading...")},n.state={loading:!0,token:null},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"handleResponse",value:function(e){var t=this;return e.text().then((function(n){var a=n&&JSON.parse(n);return e.ok?a:(401===e.status&&t.signOut(),a)}))}},{key:"signOut",value:function(e){localStorage.clear(),this.props.history.push("/login")}},{key:"render",value:function(){var e=this;return p.a.createElement("div",{className:"app google-font"},p.a.createElement(f.c,{fixed:!0},p.a.createElement(i.Suspense,{fallback:this.loading()},p.a.createElement(E,{onLogout:function(t){return e.signOut(t)}}))),p.a.createElement("div",{className:"app-body"},p.a.createElement("main",{className:"main"},p.a.createElement(f.a,{appRoutes:x,router:h}),p.a.createElement(d.a,{fluid:!0},p.a.createElement(i.Suspense,{fallback:this.loading()},p.a.createElement(m.g,null,x.map((function(e,t){return e.component?p.a.createElement(m.d,{key:t,path:e.path,exact:e.exact,name:e.name,render:function(t){return p.a.createElement(e.component,t)}}):null}))))))),p.a.createElement(f.b,null,p.a.createElement(i.Suspense,{fallback:this.loading()},p.a.createElement(v,null))))}}]),t}(i.Component);t.default=z}}]);
//# sourceMappingURL=21.86f2719e.chunk.js.map