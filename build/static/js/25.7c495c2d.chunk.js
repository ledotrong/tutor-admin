(this["webpackJsonptutor-admin"]=this["webpackJsonptutor-admin"]||[]).push([[25],{549:function(e,t,a){"use strict";a.r(t);a(58);var n=a(61),r=(a(261),a(291)),s=a(77),l=(a(93),a(119)),c=a(92),o=a(62),u=a.n(o),i=(a(126),a(132)),m=a(12),p=a(13),d=a(15),b=a(14),g=a(16),h=a(0),E=a.n(h),f=a(184),k=a(311),v=a(185),w=a(370),y=a(186),x=a(78),N=a.n(x),j=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(d.a)(this,Object(b.a)(t).call(this,e))).componentDidMount=function(){var e,t,n,r;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return(e=JSON.parse(localStorage.getItem("token")))&&a.setState({token:e}),s.next=4,u.a.awrap(a.getUsers(e));case 4:t=s.sent,n=null,r=!1,t.length&&((n=t.find((function(e){return e._id.toString()===a.props.match.params.id})))&&("banned"===n.status&&(r=!0),n.picture=E.a.createElement("img",{src:n.picture,style:{height:250,width:250,objectFit:"cover",borderRadius:125},alt:"profile"}),n.status=E.a.createElement(i.a,{status:a.getBadge(n.status),text:n.status}),n.date=new Date(n.date).toLocaleString(),n.address=Object.values(n.address).join(", "),n.skillCount=n.skills.length,n.wages=n.wages?n.wages+" VND/hour":"not assigned"),a.setState({user:n,banAction:r}));case 8:case"end":return s.stop()}}))},a.getBadge=function(e){return"active"===e?"success":"inactive"===e?"default":"banned"===e?"error":"primary"},a.getUsers=function(e){var t,n,r;return u.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return t={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(e)}},s.prev=1,s.next=4,u.a.awrap(fetch("https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/users",t));case 4:return n=s.sent,s.next=7,u.a.awrap(a.handleResponse(n));case 7:return r=s.sent,a.setState({loading:!1,userData:r}),s.abrupt("return",r);case 12:return s.prev=12,s.t0=s.catch(1),s.abrupt("return",s.t0);case 15:case"end":return s.stop()}}),null,null,[[1,12]])},a.banUserAction=function(){var e,t,n,r,s;return u.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return a.setState({loading:!0}),e={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.state.token)}},l.prev=2,l.next=5,u.a.awrap(fetch("https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/ban-user/".concat(a.state.user._id),e));case 5:return t=l.sent,l.next=8,u.a.awrap(a.handleResponse(t));case 8:n=l.sent,r=a.state.user,s=new Date(r.date),r.date=s.toLocaleString(),r.status=E.a.createElement(i.a,{status:a.getBadge(n),text:n}),a.setState({loading:!1,user:r,banAction:!a.state.banAction}),l.next=19;break;case 16:l.prev=16,l.t0=l.catch(2),console.log(l.t0);case 19:case"end":return l.stop()}}),null,null,[[2,16]])},a.state=Object(c.a)({token:null,loading:!0,banAction:!1,userData:[],user:null},"token",null),a}return Object(g.a)(t,e),Object(p.a)(t,[{key:"handleResponse",value:function(e){return e.text().then((function(t){var a=t&&JSON.parse(t);return e.ok?a:(e.status,a)}))}},{key:"render",value:function(){var e=this,t=["magenta","cyan","green","volcano","orange","purple","lime","red","blue","gold","geekblue"],a=this.state.user,c=[];if(a){var o=-1;a.skills.map((function(e){var a=t[++o%t.length],n=E.a.createElement(l.a,{color:a},e);c.push(n)}))}a||(a={id:"Not found"});a.name,a.email,a.address,a.role,a.skills,a.date,a.wages,a.status,a.introduction;return E.a.createElement("div",{className:"animated fadeIn"},E.a.createElement(N.a,{active:this.state.loading,spinner:!0,text:"Loading...",styles:{overlay:function(e){return Object(s.a)({},e,{background:"rgba(255, 255, 255, 0.5)",color:"black"})},spinner:function(e){return Object(s.a)({},e,{width:"100px","& svg circle":{stroke:"rgba(255, 0, 0, 0.5)"}})}}},E.a.createElement(f.a,{className:"justify-content-center"},E.a.createElement(k.a,{lg:12},E.a.createElement(v.a,null,E.a.createElement(w.a,{className:"bg-dark"},E.a.createElement("strong",null,E.a.createElement("i",{className:"icon-info pr-1"}),"User ID:"," ",this.props.match.params.id)),E.a.createElement(y.a,null,E.a.createElement(f.a,null,E.a.createElement(k.a,{lg:3,className:" mt-4"},E.a.createElement(f.a,{className:"justify-content-center font-weight-bold mb-3"},E.a.createElement("h2",{className:"text-uppercase name-font"},a.name)),E.a.createElement(f.a,{className:"justify-content-center"},a.picture)),E.a.createElement(k.a,{className:"ml-4 mt-4",lg:8},E.a.createElement(r.a,{title:"User Information",bordered:!0,column:{xxl:4,xl:3,lg:3,md:3,sm:2,xs:1}},E.a.createElement(r.a.Item,{label:"Role"},a.role),E.a.createElement(r.a.Item,{label:"Status"},a.status),E.a.createElement(r.a.Item,{label:"Registered"},a.date),E.a.createElement(r.a.Item,{label:"Rating"},a.rate),E.a.createElement(r.a.Item,{label:"Skills"},a.skillCount),E.a.createElement(r.a.Item,{label:"Wages"},a.wages),E.a.createElement(r.a.Item,{label:"Info"},E.a.createElement("strong",null,"Email: "),E.a.createElement("br",null)," ",E.a.createElement("span",{className:"ml-4 mb-2"},a.email),E.a.createElement("br",null),E.a.createElement("strong",null,"Address: "),E.a.createElement("br",null)," ",E.a.createElement("span",{className:"ml-4 mb-2"},a.address),E.a.createElement("br",null)," ",E.a.createElement("strong",null,"Skills: "),E.a.createElement("br",null)," ",E.a.createElement("span",{className:"ml-4 mb-2"},c),E.a.createElement("br",null),E.a.createElement("strong",null,"Introduction: "),E.a.createElement("br",null),E.a.createElement("span",{className:"ml-4 mb-2"},a.introduction))),E.a.createElement(f.a,{className:"justify-content-end mt-4 mr-2"},E.a.createElement(n.a,{onClick:function(){return e.banUserAction()},type:this.state.banAction?"primary":"danger"},this.state.banAction?"Unban":"Ban"))))))))))}}]),t}(h.Component);t.default=j}}]);
//# sourceMappingURL=25.7c495c2d.chunk.js.map