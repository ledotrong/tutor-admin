(this["webpackJsonptutor-admin"]=this["webpackJsonptutor-admin"]||[]).push([[22],{550:function(e,t,a){"use strict";a.r(t);a(530);var n=a(528),r=(a(104),a(116)),l=(a(83),a(88)),o=(a(510),a(529)),c=a(77),s=a(62),i=a.n(s),u=a(12),p=a(13),h=a(15),m=a(14),v=a(16),d=a(0),f=a.n(d),k=a(311),g=a(78),E=a.n(g),y=a(527),b=function(e){function t(e){var a;return Object(u.a)(this,t),(a=Object(h.a)(this,Object(m.a)(t).call(this,e))).componentWillMount=function(){var e;return i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:(e=JSON.parse(localStorage.getItem("token")))?a.setState({token:e}):a.props.history.push("/login");case 2:case"end":return t.stop()}}))},a.getRevenue=function(){var e,t,n;return i.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return a.setState({loading:!0}),e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(a.state.token)}},r.prev=2,r.next=5,i.a.awrap(fetch("https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/revenue",e));case 5:return t=r.sent,r.next=8,i.a.awrap(a.handleResponse(t));case 8:n=r.sent,a.setState({loading:!1,revenue:n}),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(2),a.setState({loading:!1}),console.log(r.t0);case 16:case"end":return r.stop()}}),null,null,[[2,12]])},a.state={token:null,revenue:[],loading:!1,rangeFilter:"all"},a}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("token"));e&&this.setState({token:e}),this.getRevenue()}},{key:"handleResponse",value:function(e){return e.text().then((function(t){var a=t&&JSON.parse(t);return!!e.ok&&a}))}},{key:"onChangeFilter",value:function(e){this.setState({rangeFilter:e.target.value})}},{key:"render",value:function(){var e=this,t=[],a=0;this.state.revenue.length&&this.state.revenue.forEach((function(e,n){t.push({contract:(n+1).toString(),value:e.price}),a+=e.price}));return f.a.createElement("div",{className:"animated fadeIn mt-4"},f.a.createElement(E.a,{active:this.state.loading,spinner:!0,text:"Loading...",styles:{overlay:function(e){return Object(c.a)({},e,{background:"rgba(255, 255, 255, 0.5)",color:"black"})},spinner:function(e){return Object(c.a)({},e,{width:"100px","& svg circle":{stroke:"rgba(255, 0, 0, 0.5)"}})}}},f.a.createElement(n.a,{title:"Dashboard",bordered:!1},f.a.createElement(l.a,{type:"flex",justify:"center",className:"mt-4"},f.a.createElement(k.a,{xl:5},f.a.createElement("h3",null,"Statistic"),f.a.createElement(l.a,null,f.a.createElement(l.a,{type:"flex",justify:"start"},f.a.createElement(o.a,{title:"Revenue (VND)",value:a,precision:0}),f.a.createElement(o.a,{title:"Contracts",value:t.length,precision:0,className:"ml-4"})),f.a.createElement("h6",{className:"mt-4",style:{color:"grey"}},"Top Revenue per Skill"),f.a.createElement(y.b,{forceFit:!0,height:350,data:[{skill:"ReactJS",revenue:41.8},{skill:"Angular",revenue:38},{skill:"React Native",revenue:33.7},{skill:"VueJS",revenue:30.7},{skill:"C#",revenue:25.8},{skill:".NET",revenue:31.7},{skill:"Unity",revenue:33},{skill:"English",revenue:46},{skill:"Guitar",revenue:38.3}]},f.a.createElement(y.h,null),f.a.createElement(y.d,{position:"bottom",dataKey:"skill",offsetX:0}),f.a.createElement(y.c,{type:"polar"}),f.a.createElement(y.f,{position:"skill*revenue",color:"skill",style:{stroke:"#fff",lineWidth:1}})))),f.a.createElement(k.a,{xl:6},f.a.createElement(r.a.Group,{className:"d-flex justify-content-end mb-2",defaultValue:"a",size:"small",buttonStyle:"solid",onChange:function(t){return e.onChangeFilter(t)},value:this.state.rangeFilter},f.a.createElement(r.a.Button,{value:"all"},"All"),f.a.createElement(r.a.Button,{value:"week"},"Week"),f.a.createElement(r.a.Button,{value:"month"},"Month")),f.a.createElement(n.a,{title:"Revenue",bordered:!0},f.a.createElement(y.b,{forceFit:!0,height:400,data:t,scale:[{dataKey:"value"},{dataKey:"contract"}]},f.a.createElement(y.h,null),f.a.createElement(y.a,null),f.a.createElement(y.g,{color:"#00d77d",position:"contract*value"}),f.a.createElement(y.e,{color:"#00d77d",position:"contract*value",shape:"circle"}))))))))}}]),t}(d.Component);t.default=b}}]);
//# sourceMappingURL=22.ca9f16db.chunk.js.map