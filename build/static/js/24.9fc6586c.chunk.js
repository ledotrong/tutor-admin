(this["webpackJsonptutor-admin"]=this["webpackJsonptutor-admin"]||[]).push([[24],{544:function(e,t,a){"use strict";a.r(t);var n=a(77),l=a(92),o=a(62),r=a.n(o),s=a(12),i=a(13),c=a(15),d=a(14),u=a(19),h=a(16),m=a(0),p=a.n(m),g=a(78),k=a.n(g),f=a(118),b=a(158),y=a(184),E=a(311),v=a(185),C=a(370),S=a(186),w=a(556),D=a(545),O=a(546),x=a(238),N=a(239),j=a(547),M=function(e){function t(e){var a,n;return Object(s.a)(this,t),(n=Object(c.a)(this,Object(d.a)(t).call(this,e))).componentWillMount=function(){var e;return r.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:(e=JSON.parse(localStorage.getItem("token")))?n.setState({token:e}):n.props.history.push("/login");case 2:case"end":return t.stop()}}))},n.getSkills=function(){var e,t,a;return r.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e={method:"GET",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.state.token)}},l.prev=1,l.next=4,r.a.awrap(fetch("https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skills",e));case 4:return t=l.sent,l.next=7,r.a.awrap(n.handleResponse(t));case 7:a=(a=l.sent).filter((function(e){return!0!==e.isDeleted})),n.setFormat(a),n.setState({loading:!1,skills:a}),l.next=16;break;case 13:l.prev=13,l.t0=l.catch(1),console.log(l.t0);case 16:case"end":return l.stop()}}),null,null,[[1,13]])},n.state=(a={token:null,deleteModal:!1,editModal:!1,addModal:!1,name:"",link:"",key:"",skills:[],loading:!0,currentItem:null},Object(l.a)(a,"token",null),Object(l.a)(a,"alert",null),a),n.toggleDelete=n.toggleDelete.bind(Object(u.a)(n)),n.toggleEdit=n.toggleEdit.bind(Object(u.a)(n)),n.toggleAdd=n.toggleAdd.bind(Object(u.a)(n)),n.onChangeHandler=n.onChangeHandler.bind(Object(u.a)(n)),n.onCreate=n.onCreate.bind(Object(u.a)(n)),n.onEdit=n.onEdit.bind(Object(u.a)(n)),n.onDelete=n.onDelete.bind(Object(u.a)(n)),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=JSON.parse(localStorage.getItem("token"));e&&this.setState({token:e}),this.getSkills()}},{key:"setFormat",value:function(e){var t=this;e.forEach((function(e,a){e.id=a+1,e.isDeleted=void 0,e.actions=p.a.createElement("div",{className:"float-right"},p.a.createElement(b.a,{className:"mr-2",onClick:function(){return t.toggleEditItem(e)},type:"primary",icon:"edit",style:{backgroundColor:"#00C5D7",borderColor:"#00C5D7",color:"white"}},"Edit"),p.a.createElement(b.a,{icon:"delete",onClick:function(){return t.toggleDeleteItem(e)},type:"danger",style:{backgroundColor:"#d71200",borderColor:"#d71200",color:"white"}},"Delete"))}))}},{key:"handleResponse",value:function(e){return e.text().then((function(t){var a=t&&JSON.parse(t);return!!e.ok&&a}))}},{key:"onChangeHandler",value:function(e){this.setState(Object(l.a)({},e.target.name,e.target.value))}},{key:"toggleDelete",value:function(){this.setState({deleteModal:!this.state.deleteModal})}},{key:"toggleDeleteItem",value:function(e){this.toggleDelete(),this.setState({currentItem:e})}},{key:"toggleEdit",value:function(){this.setState({editModal:!this.state.editModal})}},{key:"toggleEditItem",value:function(e){this.toggleEdit(),this.setState({currentItem:e})}},{key:"toggleAdd",value:function(){this.setState({addModal:!this.state.addModal,alert:null})}},{key:"onCreate",value:function(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),this.setState({loading:!0}),t={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)},body:JSON.stringify({name:this.state.name})},n.prev=3,n.next=6,r.a.awrap(fetch("https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skill",t));case 6:return a=n.sent,n.next=9,r.a.awrap(this.handleResponse(a));case 9:n.sent&&(this.getSkills(),this.setState({addModal:!1,alert:null})),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),console.log(n.t0);case 16:case"end":return n.stop()}}),null,this,[[3,13]])}},{key:"onEdit",value:function(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),this.setState({loading:!0}),console.log("Update"),t={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)},body:JSON.stringify({name:this.state.name,key:this.state.currentItem._id})},n.prev=4,n.next=7,r.a.awrap(fetch("https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skill/update",t));case 7:return a=n.sent,n.next=10,r.a.awrap(this.handleResponse(a));case 10:n.sent&&(this.getSkills(),this.setState({editModal:!1,alert:null})),n.next=17;break;case 14:n.prev=14,n.t0=n.catch(4),console.log(n.t0);case 17:case"end":return n.stop()}}),null,this,[[4,14]])}},{key:"onDelete",value:function(e){var t,a;return r.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e.preventDefault(),this.setState({loading:!0}),t={method:"PATCH",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(this.state.token)},body:JSON.stringify({key:this.state.currentItem._id})},n.prev=3,n.next=6,r.a.awrap(fetch("https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me/skill/delete",t));case 6:return a=n.sent,n.next=9,r.a.awrap(this.handleResponse(a));case 9:n.sent&&(this.getSkills(),this.setState({deleteModal:!1,alert:null})),n.next=16;break;case 13:n.prev=13,n.t0=n.catch(3),console.log(n.t0);case 16:case"end":return n.stop()}}),null,this,[[3,13]])}},{key:"render",value:function(){return p.a.createElement("div",{className:"animated fadeIn"},p.a.createElement(k.a,{active:this.state.loading,spinner:!0,text:"Loading...",styles:{overlay:function(e){return Object(n.a)({},e,{background:"rgba(255, 255, 255, 0.5)",color:"black"})},spinner:function(e){return Object(n.a)({},e,{width:"100px","& svg circle":{stroke:"rgba(255, 0, 0, 0.5)"}})}}},p.a.createElement(y.a,{className:"justify-content-center"},p.a.createElement(E.a,{xs:"6",lg:"8"},p.a.createElement(v.a,null,p.a.createElement(C.a,{className:"bg-dark"},p.a.createElement("i",{className:"fa fa-align-justify"}),"Skills"),p.a.createElement(S.a,null,p.a.createElement(b.a,{onClick:this.toggleAdd,type:"primary",className:"mb-3 float-right",icon:"plus-circle",style:{backgroundColor:"#00d77d",borderColor:"#00d77d",color:"white"}},"Add"),p.a.createElement(f.d,{responsive:!0,hover:!0,bordered:!0,data:{columns:[{label:"ID",field:"id",sort:"asc",width:50},{label:"Name",field:"name",sort:"asc",width:150},{label:"Actions",field:"actions",sort:"asc",width:100}],rows:this.state.skills}}))))),p.a.createElement(w.a,{isOpen:this.state.addModal,toggleDelete:this.toggleAdd,className:"modal-success "},p.a.createElement(D.a,null,"Add"),p.a.createElement(O.a,null,p.a.createElement(x.a,{onSubmit:this.onCreate},p.a.createElement(N.a,{type:"text",id:"text-input",name:"name",placeholder:"Name",required:!0,className:"mb-2",onChange:this.onChangeHandler}),this.state.alert,p.a.createElement(b.a,{className:"float-right",color:"success",type:"submit",onSubmit:this.onCreate},"Add"))),p.a.createElement(j.a,null,p.a.createElement(b.a,{color:"secondary",onClick:this.toggleAdd},"Cancel"))),p.a.createElement(w.a,{isOpen:this.state.editModal,toggleDelete:this.toggleEdit,className:"modal-info "},p.a.createElement(D.a,null,"Edit"),p.a.createElement(O.a,null,p.a.createElement(x.a,{onSubmit:this.onEdit},p.a.createElement(N.a,{type:"text",id:"edit-name",name:"key",placeholder:"key",required:!0,disabled:!0,value:this.state.currentItem?this.state.currentItem._id:"",className:"mb-2",onChange:this.onChangeHandler}),p.a.createElement(N.a,{type:"text",id:"edit-link",name:"name",placeholder:"Name",required:!0,className:"mb-2",onChange:this.onChangeHandler}),p.a.createElement(b.a,{className:"float-right",color:"info",type:"submit",onSubmit:this.onEdit},"Update"))),p.a.createElement(j.a,null,p.a.createElement(b.a,{color:"secondary",onClick:this.toggleEdit},"Cancel"))),p.a.createElement(w.a,{isOpen:this.state.deleteModal,toggleDelete:this.toggleDelete,className:"modal-danger "},p.a.createElement(D.a,null,"Delete"),p.a.createElement(O.a,null,"This skill will be marked as 'deleted'. Do you want to continue?"),p.a.createElement(j.a,null,p.a.createElement(b.a,{color:"danger",onClick:this.onDelete},"Confirm")," ",p.a.createElement(b.a,{color:"secondary",onClick:this.toggleDelete},"Cancel")))))}}]),t}(m.Component);t.default=M}}]);
//# sourceMappingURL=24.9fc6586c.chunk.js.map