{"version":3,"sources":["routes.js","containers/DefaultLayout/DefaultLayout.js"],"names":["Skills","React","lazy","Users","User","Accounts","routes","path","exact","name","component","DefaultFooter","DefaultHeader","DefaultLayout","props","componentWillMount","a","async","token","JSON","parse","localStorage","getItem","setState","history","push","componentDidMount","state","getUsers","role","setItem","requestOptions","method","headers","Authorization","fetch","response","handleResponse","userData","loading","className","text","then","data","ok","status","signOut","e","clear","this","fixed","fallback","onLogout","appRoutes","router","Container","fluid","map","route","idx","key","render","Component"],"mappings":"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","file":"static/js/21.86f2719e.chunk.js","sourcesContent":["import React from 'react';\n\nconst Skills = React.lazy(() => import('./views/Skills/Skills'));\nconst Users = React.lazy(() => import('./views/Users/Users'));\nconst User = React.lazy(() => import('./views/Users/User'));\nconst Accounts = React.lazy(() => import('./views/Accounts/Accounts'));\nconst Dashboard = React.lazy(() => import('./views/Dashboard/Dashboard'));\nconst Contracts = React.lazy(() => import('./views/Contracts/Contracts'));\nconst Contract = React.lazy(() => import('./views/Contracts/Contract'));\n\nconst routes = [\n  { path: '/', exact: true, name: 'Dashboard', component: Dashboard },\n  { path: '/skills', exact: true, name: 'Skills', component: Skills },\n  { path: '/users', exact: true, name: 'Users', component: Users },\n  { path: '/users/:id', exact: true, name: 'User Details', component: User },\n  { path: '/accounts', exact: true, name: 'Accounts', component: Accounts },\n  { path: '/contracts', exact: true, name: 'Contracts', component: Contracts },\n  { path: '/contracts/:id', exact: true, name: 'Contract', component: Contract }\n];\n\nexport default routes;\n","import React, { Component, Suspense } from 'react';\nimport { Redirect, Route, Switch } from 'react-router-dom';\nimport * as router from 'react-router-dom';\nimport { Container } from 'reactstrap';\n\nimport {\n  AppFooter,\n  AppHeader,\n  AppBreadcrumb2 as AppBreadcrumb\n} from '@coreui/react';\n// routes config\nimport routes from '../../routes';\n\nconst DefaultFooter = React.lazy(() => import('./DefaultFooter'));\nconst DefaultHeader = React.lazy(() => import('./DefaultHeader'));\n\nclass DefaultLayout extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loading: true,\n      token: null\n    };\n  }\n\n  componentWillMount = async () => {\n    // const token = localStorage.removeItem(\"token\");\n    const token = JSON.parse(localStorage.getItem('token'));\n\n    if (token) {\n      this.setState({ token });\n    } else {\n      this.props.history.push('/login');\n    }\n  };\n\n  componentDidMount = async () => {\n    if (this.state.token) {\n      const role = await this.getUsers();\n      localStorage.setItem('role', role);\n    } else {\n      this.props.history.push('/login');\n    }\n  };\n\n  getUsers = async () => {\n    const requestOptions = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        Authorization: `Bearer ${this.state.token}`\n      }\n    };\n    try {\n      const response = await fetch(\n        'https://cors-anywhere.herokuapp.com/https://admin-api-tutor.herokuapp.com/me',\n        requestOptions\n      );\n\n      let userData = await this.handleResponse(response);\n\n      return userData.role;\n    } catch (err) {\n      return err;\n    }\n  };\n\n  handleResponse(response) {\n    return response.text().then(text => {\n      const data = text && JSON.parse(text);\n      if (!response.ok) {\n        if (response.status === 401) {\n          this.signOut();\n        }\n        return data;\n      }\n      return data;\n    });\n  }\n\n  loading = () => (\n    <div className=\"animated fadeIn pt-1 text-center\">Loading...</div>\n  );\n\n  signOut(e) {\n    localStorage.clear();\n    this.props.history.push('/login');\n  }\n\n  render() {\n    return (\n      <div className=\"app google-font\">\n        <AppHeader fixed>\n          <Suspense fallback={this.loading()}>\n            <DefaultHeader onLogout={e => this.signOut(e)} />\n          </Suspense>\n        </AppHeader>\n        <div className=\"app-body\">\n          <main className=\"main\">\n            <AppBreadcrumb appRoutes={routes} router={router} />\n            <Container fluid>\n              <Suspense fallback={this.loading()}>\n                <Switch>\n                  {routes.map((route, idx) => {\n                    return route.component ? (\n                      <Route\n                        key={idx}\n                        path={route.path}\n                        exact={route.exact}\n                        name={route.name}\n                        render={props => <route.component {...props} />}\n                      />\n                    ) : null;\n                  })}\n                </Switch>\n              </Suspense>\n            </Container>\n          </main>\n        </div>\n        <AppFooter>\n          <Suspense fallback={this.loading()}>\n            <DefaultFooter />\n          </Suspense>\n        </AppFooter>\n      </div>\n    );\n  }\n}\n\nexport default DefaultLayout;\n"],"sourceRoot":""}